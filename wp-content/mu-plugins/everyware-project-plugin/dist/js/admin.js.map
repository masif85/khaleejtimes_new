{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/assets/js/admin.js","src/assets/js/components/image-upload.js","src/assets/js/components/json-import-export.js","src/assets/js/components/oc-query-tester.js","src/assets/js/components/sortable-list.js","src/assets/js/jquery/jquery.multi-select.js"],"names":[],"mappings":"AAAA;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"admin.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","require('./components/sortable-list');\nrequire('./components/json-import-export');\nrequire('./jquery/jquery.multi-select.js');\nrequire('./components/oc-query-tester');\nrequire('./components/image-upload');\n\njQuery(function($) {\n    $('.ew-wrap .ew-tooltip').each(function( i, tooltip) {\n        var tooltipContainer = $(tooltip).closest(\".ew-wrap\");\n\n        $(tooltip).tooltip({\n            container: tooltipContainer,\n            trigger: \"focus\",\n            toggle: \"tooltip\",\n            html: true,\n            template: '<div class=\"tooltip ew-tooltip\" role=\"tooltip\"><div class=\"tooltip-arrow\"></div><div class=\"tooltip-inner\"></div></div>'\n        });\n    });\n\n    $('.ew-wrap .ew-popover').popover();\n});\n","jQuery(function($) {\n    $(document).ready( function(e) {\n\n        window.ImageUpload = window.ImageUpload || {};\n        var ImageUpload = window.ImageUpload;\n\n        ImageUpload.file_frame = null;\n        ImageUpload.initialized = false;\n        ImageUpload.uploadTriggered = false;\n        ImageUpload.uploadButton = undefined;\n\n        ImageUpload.init = function() {\n            ImageUpload.initialized = true;\n\n            $(document).on('click', '.upload_button', function(e) {\n                e.preventDefault();\n                e.stopPropagation();\n\n                if( ImageUpload.uploadTriggered ) return;\n                ImageUpload.uploadTriggered = true;\n                ImageUpload.uploadButton = $(e.target);\n\n                ImageUpload.file_frame = wp.media.frames.file_frame = wp.media({\n                    title: 'Picture',\n                    button: {\n                        text: \"select\"\n                    },\n                    multiple: false\n                });\n\n                ImageUpload.file_frame.on( 'select', function() {\n                    var attachment = ImageUpload.file_frame.state().get('selection').first().toJSON();\n                    ImageUpload.appendImage( attachment );\n                });\n\n                ImageUpload.file_frame.on( 'close', function() {\n                    ImageUpload.uploadTriggered = false;\n                });\n\n                ImageUpload.file_frame.open();\n            });\n\n            $(document).on('click', '.image_placeholder .remove', ImageUpload.removeImage );\n        };\n\n        ImageUpload.appendImage = function( json ) {\n            $(ImageUpload.uploadButton).siblings('.image_placeholder')\n                .html(\n                    '<span class=\"ew-image__wrapper img_wrapper\">' +\n                    '<img class=\"ew-img__object\" src=\"'+ ImageUpload.createImageSrc(json.url) +'\"/>' +\n                    '<span class=\"ew-image__icon--remove remove fa fa-times\"></span></span>'\n                );\n            $(ImageUpload.uploadButton).siblings('.hidden').val(json.url);\n            ImageUpload.uploadButton.val('Byt bild');\n        };\n\n        ImageUpload.createImageSrc = function(url) {\n            return url + '?' + new Date().getTime();\n        };\n\n        ImageUpload.removeImage = function(e) {\n            var $placeholder = $(e.target).parents('.image_placeholder');\n            $placeholder.siblings('.hidden').val('');\n            $placeholder.html('');\n            ImageUpload.uploadButton.val('VÃ¤lj bild');\n        };\n\n        if( !ImageUpload.initialized ) {\n            ImageUpload.init();\n        }\n    });\n});\n","jQuery(function($) {\n    var $mainWrapper, $importWrapper, $exportWrapper;\n\n    $(document).ready(function () {\n\n        // Import and export\n        $mainWrapper = $('#import-export__wrapper');\n        $importWrapper = $('.import__wrapper', $mainWrapper);\n        $exportWrapper = $('.export__wrapper', $mainWrapper);\n\n        $mainWrapper.on('click', '.export__btn', function () {\n            $exportWrapper.slideToggle();\n            $exportWrapper.find('textarea').select();\n\n            if ($importWrapper.is(\":visible\")) {\n                $importWrapper.slideToggle();\n            }\n        });\n\n        $mainWrapper.on('click', '.import__btn', function () {\n            $importWrapper.slideToggle();\n            $importWrapper.find('textarea').select();\n\n            if ($exportWrapper.is(\":visible\")) {\n                $exportWrapper.slideToggle();\n            }\n        });\n    });\n});\n","/*global oc_ajax*/\n/*global translation*/\n\noc_ajax.oc_ajax_url = oc_ajax.oc_ajax_url || '';\ntranslation.oc_query_result = translation.oc_query_result || '';\n\n//Ajax test OC query from widget\njQuery(function($) {\n    var postUrl = oc_ajax.oc_ajax_url || '';\n    var classes = {\n        testResultWrapperLoaded: 'oc-query-result--loaded',\n        testResultHeadline: 'oc-query-result__headline',\n        testResultMessage: 'oc-query-result__message',\n    };\n    var selectors = {\n        wrapper: '.oc-query-box',\n        testResultWrapper: '.oc-query-result',\n        testButton: '.oc-query-test',\n        oc: {\n            limit: '.oc-query-limit',\n            query: '.oc-query-search',\n            start: '.oc-query-start',\n            sort: '.oc-query-sort',\n        },\n    };\n\n    var resultWrapper;\n\n    function getQueryData($formWrapper) {\n        return {\n            action: 'test_oc_query',\n            query: $formWrapper.find(selectors.oc.query).val(),\n            oc_query_start: $formWrapper.find(selectors.oc.start).val(),\n            oc_query_limit: $formWrapper.find(selectors.oc.limit).val(),\n            oc_query_sort: $formWrapper.find(selectors.oc.sort).val(),\n        }\n    }\n\n    $(document).on('click', selectors.testButton, function (e) {\n        e.preventDefault();\n        var el = e.target,\n            $el = $(el),\n            $parent = $el.closest(selectors.wrapper),\n            queryData = getQueryData($el.closest(selectors.wrapper));\n\n        resultWrapper = $parent.find(selectors.testResultWrapper);\n\n        resultWrapper.empty().append('<i class=\"fa fa-spinner fa-spin fa-2x fa-fw\"></i>').addClass(classes.testResultWrapperLoaded);\n        $.post(postUrl, queryData)\n            .done(function (data) {\n                var result = '<h4 class=\"oc-query-result__headline\">' + translation.oc_query_result + '</h4>';\n\n                var parsedData = $.parseJSON(data);\n\n                for (var obj in parsedData) {\n                    if ({}.hasOwnProperty.call(parsedData, obj)) {\n                        result += '<p class=\"oc-query-result__message\">' + obj + \" : \" + parsedData[obj] + '</p>';\n                    }\n                }\n\n                resultWrapper.empty().append(result);\n            });\n\n        return false;\n    });\n});\n","jQuery(function($) {\n    var $list,\n        classes = {\n            list: 'sortable-list',\n            item: 'sortable-list__item',\n            itemClone: 'sortable-list__item--template',\n            dragHandle: 'sortable-list__drag-handle',\n            placeHolder: 'sortable-placeholder',\n            addBtn: 'sortable-list__item-add',\n            deleteBtn: 'sortable-list__item-delete',\n        },\n        selectors = {\n            list: '.' + classes.list,\n            item: '.' + classes.item,\n            itemClone: '.' + classes.itemClone,\n            dragHandle: '.' + classes.dragHandle,\n            addBtn: '.' + classes.addBtn,\n            deleteBtn: '.' + classes.deleteBtn,\n        };\n\n    $(document).ready(function () {\n        $list = $(selectors.list).sortable({\n            axis: \"y\",\n            containment: \"parent\",\n            items: \"> \" + selectors.item,\n            cursor: \"move\",\n            handle: selectors.dragHandle,\n            placeholder: \"sortable-placeholder\",\n            forcePlaceholderSize: true,\n            tolerance: \"pointer\",\n        });\n\n        $list.on('click', selectors.deleteBtn, function (e) {\n            e.preventDefault();\n\n            var $row = $(e.target).closest(selectors.item).fadeOut(200, function () {\n                $row.remove()\n            });\n        });\n\n        $(selectors.addBtn).on('click', function (e) {\n            e.preventDefault();\n\n            var newItem = $(selectors.itemClone).clone();\n\n            newItem.removeClass(classes.itemClone).appendTo($list);\n\n            newItem.find('input').eq(0).focus();\n        });\n    });\n});\n","/*\n* MultiSelect v0.9.12\n* Copyright (c) 2012 Louis Cuny\n*\n* This program is free software. It comes without any warranty, to\n* the extent permitted by applicable law. You can redistribute it\n* and/or modify it under the terms of the Do What The Fuck You Want\n* To Public License, Version 2, as published by Sam Hocevar. See\n* http://sam.zoy.org/wtfpl/COPYING for more details.\n*/\n\n!function ($) {\n\n    \"use strict\";\n\n\n    /* MULTISELECT CLASS DEFINITION\n     * ====================== */\n\n    var MultiSelect = function (element, options) {\n        this.options = options;\n        this.$element = $(element);\n        this.$container = $('<div/>', {'class': \"ms-container\"});\n        this.$selectableContainer = $('<div/>', {'class': 'ms-selectable'});\n        this.$selectionContainer = $('<div/>', {'class': 'ms-selection'});\n        this.$selectableUl = $('<ul/>', {'class': \"ms-list\", 'tabindex': '-1'});\n        this.$selectionUl = $('<ul/>', {'class': \"ms-list\", 'tabindex': '-1'});\n        this.scrollTo = 0;\n        this.elemsSelector = 'li:visible:not(.ms-optgroup-label,.ms-optgroup-container,.' + options.disabledClass + ')';\n    };\n\n    MultiSelect.prototype = {\n        constructor: MultiSelect,\n\n        init: function () {\n            var that = this,\n                ms = this.$element;\n\n            if (ms.next('.ms-container').length === 0) {\n                ms.css({position: 'absolute', left: '-9999px'});\n                ms.attr('id', ms.attr('id') ? ms.attr('id') : Math.ceil(Math.random() * 1000) + 'multiselect');\n                this.$container.attr('id', 'ms-' + ms.attr('id'));\n                this.$container.addClass(that.options.cssClass);\n                ms.find('option').each(function () {\n                    that.generateLisFromOption(this);\n                });\n\n                this.$selectionUl.find('.ms-optgroup-label').hide();\n\n                if (that.options.selectableHeader) {\n                    that.$selectableContainer.append(that.options.selectableHeader);\n                }\n                that.$selectableContainer.append(that.$selectableUl);\n                if (that.options.selectableFooter) {\n                    that.$selectableContainer.append(that.options.selectableFooter);\n                }\n\n                if (that.options.selectionHeader) {\n                    that.$selectionContainer.append(that.options.selectionHeader);\n                }\n                that.$selectionContainer.append(that.$selectionUl);\n                if (that.options.selectionFooter) {\n                    that.$selectionContainer.append(that.options.selectionFooter);\n                }\n\n                that.$container.append(that.$selectableContainer);\n                that.$container.append(that.$selectionContainer);\n                ms.after(that.$container);\n\n                that.activeMouse(that.$selectableUl);\n                that.activeKeyboard(that.$selectableUl);\n\n                var action = that.options.dblClick ? 'dblclick' : 'click';\n\n                that.$selectableUl.on(action, '.ms-elem-selectable', function () {\n                    that.select($(this).data('ms-value'));\n                });\n                that.$selectionUl.on(action, '.ms-elem-selection', function () {\n                    that.deselect($(this).data('ms-value'));\n                });\n\n                that.activeMouse(that.$selectionUl);\n                that.activeKeyboard(that.$selectionUl);\n\n                ms.on('focus', function () {\n                    that.$selectableUl.focus();\n                });\n            }\n\n            var selectedValues = ms.find('option:selected').map(function () {\n                return $(this).val();\n            }).get();\n            that.select(selectedValues, 'init');\n\n            if (typeof that.options.afterInit === 'function') {\n                that.options.afterInit.call(this, this.$container);\n            }\n        },\n\n        'generateLisFromOption': function (option, index, $container) {\n            var that = this,\n                ms = that.$element,\n                attributes = \"\",\n                $option = $(option);\n\n            for (var cpt = 0; cpt < option.attributes.length; cpt++) {\n                var attr = option.attributes[cpt];\n\n                if (attr.name !== 'value' && attr.name !== 'disabled') {\n                    attributes += attr.name + '=\"' + attr.value + '\" ';\n                }\n            }\n            var selectableLi = $('<li ' + attributes + '><span>' + that.escapeHTML($option.text()) + '</span></li>'),\n                selectedLi = selectableLi.clone(),\n                value = $option.val(),\n                elementId = that.sanitize(value);\n\n            selectableLi\n                .data('ms-value', value)\n                .addClass('ms-elem-selectable')\n                .attr('id', elementId + '-selectable');\n\n            selectedLi\n                .data('ms-value', value)\n                .addClass('ms-elem-selection')\n                .attr('id', elementId + '-selection')\n                .hide();\n\n            if ($option.prop('disabled') || ms.prop('disabled')) {\n                selectedLi.addClass(that.options.disabledClass);\n                selectableLi.addClass(that.options.disabledClass);\n            }\n\n            var $optgroup = $option.parent('optgroup');\n\n            if ($optgroup.length > 0) {\n                var optgroupLabel = $optgroup.attr('label'),\n                    optgroupId = that.sanitize(optgroupLabel),\n                    $selectableOptgroup = that.$selectableUl.find('#optgroup-selectable-' + optgroupId),\n                    $selectionOptgroup = that.$selectionUl.find('#optgroup-selection-' + optgroupId);\n\n                if ($selectableOptgroup.length === 0) {\n                    var optgroupContainerTpl = '<li class=\"ms-optgroup-container\"></li>',\n                        optgroupTpl = '<ul class=\"ms-optgroup\"><li class=\"ms-optgroup-label\"><span>' + optgroupLabel + '</span></li></ul>';\n\n                    $selectableOptgroup = $(optgroupContainerTpl);\n                    $selectionOptgroup = $(optgroupContainerTpl);\n                    $selectableOptgroup.attr('id', 'optgroup-selectable-' + optgroupId);\n                    $selectionOptgroup.attr('id', 'optgroup-selection-' + optgroupId);\n                    $selectableOptgroup.append($(optgroupTpl));\n                    $selectionOptgroup.append($(optgroupTpl));\n                    if (that.options.selectableOptgroup) {\n                        $selectableOptgroup.find('.ms-optgroup-label').on('click', function () {\n                            var values = $optgroup.children(':not(:selected, :disabled)').map(function () {\n                                return $(this).val();\n                            }).get();\n                            that.select(values);\n                        });\n                        $selectionOptgroup.find('.ms-optgroup-label').on('click', function () {\n                            var values = $optgroup.children(':selected:not(:disabled)').map(function () {\n                                return $(this).val();\n                            }).get();\n                            that.deselect(values);\n                        });\n                    }\n                    that.$selectableUl.append($selectableOptgroup);\n                    that.$selectionUl.append($selectionOptgroup);\n                }\n                index = index === undefined ? $selectableOptgroup.find('ul').children().length : index + 1;\n                selectableLi.insertAt(index, $selectableOptgroup.children());\n                selectedLi.insertAt(index, $selectionOptgroup.children());\n            } else {\n                index = index === undefined ? that.$selectableUl.children().length : index;\n\n                selectableLi.insertAt(index, that.$selectableUl);\n                selectedLi.insertAt(index, that.$selectionUl);\n            }\n        },\n\n        'addOption': function (options) {\n            var that = this;\n\n            if (options.value !== undefined && options.value !== null) {\n                options = [options];\n            }\n            $.each(options, function (index, option) {\n                if (option.value !== undefined && option.value !== null &&\n                    that.$element.find(\"option[value='\" + option.value + \"']\").length === 0) {\n                    var $option = $('<option value=\"' + option.value + '\">' + option.text + '</option>'),\n                        index = parseInt((typeof option.index === 'undefined' ? that.$element.children().length : option.index)),\n                        $container = option.nested === undefined ? that.$element : $(\"optgroup[label='\" + option.nested + \"']\");\n\n                    $option.insertAt(index, $container);\n                    that.generateLisFromOption($option.get(0), index, option.nested);\n                }\n            });\n        },\n\n        'escapeHTML': function (text) {\n            return $(\"<div>\").text(text).html();\n        },\n\n        'activeKeyboard': function ($list) {\n            var that = this;\n\n            $list.on('focus', function () {\n                $(this).addClass('ms-focus');\n            })\n                .on('blur', function () {\n                    $(this).removeClass('ms-focus');\n                })\n                .on('keydown', function (e) {\n                    switch (e.which) {\n                        case 40:\n                        case 38:\n                            e.preventDefault();\n                            e.stopPropagation();\n                            that.moveHighlight($(this), (e.which === 38) ? -1 : 1);\n                            return;\n                        case 37:\n                        case 39:\n                            e.preventDefault();\n                            e.stopPropagation();\n                            that.switchList($list);\n                            return;\n                        case 9:\n                            if (that.$element.is('[tabindex]')) {\n                                e.preventDefault();\n                                var tabindex = parseInt(that.$element.attr('tabindex'), 10);\n                                tabindex = (e.shiftKey) ? tabindex - 1 : tabindex + 1;\n                                $('[tabindex=\"' + (tabindex) + '\"]').focus();\n                                return;\n                            } else {\n                                if (e.shiftKey) {\n                                    that.$element.trigger('focus');\n                                }\n                            }\n                    }\n                    if ($.inArray(e.which, that.options.keySelect) > -1) {\n                        e.preventDefault();\n                        e.stopPropagation();\n                        that.selectHighlighted($list);\n                        return;\n                    }\n                });\n        },\n\n        'moveHighlight': function ($list, direction) {\n            var $elems = $list.find(this.elemsSelector),\n                $currElem = $elems.filter('.ms-hover'),\n                $nextElem = null,\n                elemHeight = $elems.first().outerHeight(),\n                containerHeight = $list.height(),\n                containerSelector = '#' + this.$container.prop('id');\n\n            $elems.removeClass('ms-hover');\n            if (direction === 1) { // DOWN\n\n                $nextElem = $currElem.nextAll(this.elemsSelector).first();\n                if ($nextElem.length === 0) {\n                    var $optgroupUl = $currElem.parent();\n\n                    if ($optgroupUl.hasClass('ms-optgroup')) {\n                        var $optgroupLi = $optgroupUl.parent(),\n                            $nextOptgroupLi = $optgroupLi.next(':visible');\n\n                        if ($nextOptgroupLi.length > 0) {\n                            $nextElem = $nextOptgroupLi.find(this.elemsSelector).first();\n                        } else {\n                            $nextElem = $elems.first();\n                        }\n                    } else {\n                        $nextElem = $elems.first();\n                    }\n                }\n            } else if (direction === -1) { // UP\n\n                $nextElem = $currElem.prevAll(this.elemsSelector).first();\n                if ($nextElem.length === 0) {\n                    var $optgroupUl = $currElem.parent();\n\n                    if ($optgroupUl.hasClass('ms-optgroup')) {\n                        var $optgroupLi = $optgroupUl.parent(),\n                            $prevOptgroupLi = $optgroupLi.prev(':visible');\n\n                        if ($prevOptgroupLi.length > 0) {\n                            $nextElem = $prevOptgroupLi.find(this.elemsSelector).last();\n                        } else {\n                            $nextElem = $elems.last();\n                        }\n                    } else {\n                        $nextElem = $elems.last();\n                    }\n                }\n            }\n            if ($nextElem.length > 0) {\n                $nextElem.addClass('ms-hover');\n                var scrollTo = $list.scrollTop() + $nextElem.position().top -\n                    containerHeight / 2 + elemHeight / 2;\n\n                $list.scrollTop(scrollTo);\n            }\n        },\n\n        'selectHighlighted': function ($list) {\n            var $elems = $list.find(this.elemsSelector),\n                $highlightedElem = $elems.filter('.ms-hover').first();\n\n            if ($highlightedElem.length > 0) {\n                if ($list.parent().hasClass('ms-selectable')) {\n                    this.select($highlightedElem.data('ms-value'));\n                } else {\n                    this.deselect($highlightedElem.data('ms-value'));\n                }\n                $elems.removeClass('ms-hover');\n            }\n        },\n\n        'switchList': function ($list) {\n            $list.blur();\n            this.$container.find(this.elemsSelector).removeClass('ms-hover');\n            if ($list.parent().hasClass('ms-selectable')) {\n                this.$selectionUl.focus();\n            } else {\n                this.$selectableUl.focus();\n            }\n        },\n\n        'activeMouse': function ($list) {\n            var that = this;\n\n            this.$container.on('mouseenter', that.elemsSelector, function () {\n                $(this).parents('.ms-container').find(that.elemsSelector).removeClass('ms-hover');\n                $(this).addClass('ms-hover');\n            });\n\n            this.$container.on('mouseleave', that.elemsSelector, function () {\n                $(this).parents('.ms-container').find(that.elemsSelector).removeClass('ms-hover');\n            });\n        },\n\n        'refresh': function () {\n            this.destroy();\n            this.$element.multiSelect(this.options);\n        },\n\n        'destroy': function () {\n            $(\"#ms-\" + this.$element.attr(\"id\")).remove();\n            this.$element.off('focus');\n            this.$element.css('position', '').css('left', '');\n            this.$element.removeData('multiselect');\n        },\n\n        'select': function (value, method) {\n            if (typeof value === 'string') {\n                value = [value];\n            }\n\n            var that = this,\n                ms = this.$element,\n                msIds = $.map(value, function (val) {\n                    return (that.sanitize(val));\n                }),\n                selectables = this.$selectableUl.find('#' + msIds.join('-selectable, #') + '-selectable').filter(':not(.' + that.options.disabledClass + ')'),\n                selections = this.$selectionUl.find('#' + msIds.join('-selection, #') + '-selection').filter(':not(.' + that.options.disabledClass + ')'),\n                options = ms.find('option:not(:disabled)').filter(function () {\n                    return ($.inArray(this.value, value) > -1);\n                });\n\n            if (method === 'init') {\n                selectables = this.$selectableUl.find('#' + msIds.join('-selectable, #') + '-selectable'),\n                    selections = this.$selectionUl.find('#' + msIds.join('-selection, #') + '-selection');\n            }\n\n            if (selectables.length > 0) {\n                selectables.addClass('ms-selected').hide();\n                selections.addClass('ms-selected').show();\n\n                options.prop('selected', true);\n\n                that.$container.find(that.elemsSelector).removeClass('ms-hover');\n\n                var selectableOptgroups = that.$selectableUl.children('.ms-optgroup-container');\n                if (selectableOptgroups.length > 0) {\n                    selectableOptgroups.each(function () {\n                        var selectablesLi = $(this).find('.ms-elem-selectable');\n                        if (selectablesLi.length === selectablesLi.filter('.ms-selected').length) {\n                            $(this).find('.ms-optgroup-label').hide();\n                        }\n                    });\n\n                    var selectionOptgroups = that.$selectionUl.children('.ms-optgroup-container');\n                    selectionOptgroups.each(function () {\n                        var selectionsLi = $(this).find('.ms-elem-selection');\n                        if (selectionsLi.filter('.ms-selected').length > 0) {\n                            $(this).find('.ms-optgroup-label').show();\n                        }\n                    });\n                } else {\n                    if (that.options.keepOrder && method !== 'init') {\n                        var selectionLiLast = that.$selectionUl.find('.ms-selected');\n                        if ((selectionLiLast.length > 1) && (selectionLiLast.last().get(0) != selections.get(0))) {\n                            selections.insertAfter(selectionLiLast.last());\n                        }\n                    }\n                }\n                if (method !== 'init') {\n                    ms.trigger('change');\n                    if (typeof that.options.afterSelect === 'function') {\n                        that.options.afterSelect.call(this, value);\n                    }\n                }\n            }\n        },\n\n        'deselect': function (value) {\n            if (typeof value === 'string') {\n                value = [value];\n            }\n\n            var that = this,\n                ms = this.$element,\n                msIds = $.map(value, function (val) {\n                    return (that.sanitize(val));\n                }),\n                selectables = this.$selectableUl.find('#' + msIds.join('-selectable, #') + '-selectable'),\n                selections = this.$selectionUl.find('#' + msIds.join('-selection, #') + '-selection').filter('.ms-selected').filter(':not(.' + that.options.disabledClass + ')'),\n                options = ms.find('option').filter(function () {\n                    return ($.inArray(this.value, value) > -1);\n                });\n\n            if (selections.length > 0) {\n                selectables.removeClass('ms-selected').show();\n                selections.removeClass('ms-selected').hide();\n                options.prop('selected', false);\n\n                that.$container.find(that.elemsSelector).removeClass('ms-hover');\n\n                var selectableOptgroups = that.$selectableUl.children('.ms-optgroup-container');\n                if (selectableOptgroups.length > 0) {\n                    selectableOptgroups.each(function () {\n                        var selectablesLi = $(this).find('.ms-elem-selectable');\n                        if (selectablesLi.filter(':not(.ms-selected)').length > 0) {\n                            $(this).find('.ms-optgroup-label').show();\n                        }\n                    });\n\n                    var selectionOptgroups = that.$selectionUl.children('.ms-optgroup-container');\n                    selectionOptgroups.each(function () {\n                        var selectionsLi = $(this).find('.ms-elem-selection');\n                        if (selectionsLi.filter('.ms-selected').length === 0) {\n                            $(this).find('.ms-optgroup-label').hide();\n                        }\n                    });\n                }\n                ms.trigger('change');\n                if (typeof that.options.afterDeselect === 'function') {\n                    that.options.afterDeselect.call(this, value);\n                }\n            }\n        },\n\n        'select_all': function () {\n            var ms = this.$element,\n                values = ms.val();\n\n            ms.find('option:not(\":disabled\")').prop('selected', true);\n            this.$selectableUl.find('.ms-elem-selectable').filter(':not(.' + this.options.disabledClass + ')').addClass('ms-selected').hide();\n            this.$selectionUl.find('.ms-optgroup-label').show();\n            this.$selectableUl.find('.ms-optgroup-label').hide();\n            this.$selectionUl.find('.ms-elem-selection').filter(':not(.' + this.options.disabledClass + ')').addClass('ms-selected').show();\n            this.$selectionUl.focus();\n            ms.trigger('change');\n            if (typeof this.options.afterSelect === 'function') {\n                var selectedValues = $.grep(ms.val(), function (item) {\n                    return $.inArray(item, values) < 0;\n                });\n                this.options.afterSelect.call(this, selectedValues);\n            }\n        },\n\n        'deselect_all': function () {\n            var ms = this.$element,\n                values = ms.val();\n\n            ms.find('option').prop('selected', false);\n            this.$selectableUl.find('.ms-elem-selectable').removeClass('ms-selected').show();\n            this.$selectionUl.find('.ms-optgroup-label').hide();\n            this.$selectableUl.find('.ms-optgroup-label').show();\n            this.$selectionUl.find('.ms-elem-selection').removeClass('ms-selected').hide();\n            this.$selectableUl.focus();\n            ms.trigger('change');\n            if (typeof this.options.afterDeselect === 'function') {\n                this.options.afterDeselect.call(this, values);\n            }\n        },\n\n        sanitize: function (value) {\n            var hash = 0, i, character;\n            if (value.length == 0) return hash;\n            var ls = 0;\n            for (i = 0, ls = value.length; i < ls; i++) {\n                character = value.charCodeAt(i);\n                hash = ((hash << 5) - hash) + character;\n                hash |= 0; // Convert to 32bit integer\n            }\n            return hash;\n        },\n    };\n\n    /* MULTISELECT PLUGIN DEFINITION\n     * ======================= */\n\n    $.fn.multiSelect = function () {\n        var option = arguments[0],\n            args = arguments;\n\n        return this.each(function () {\n            var $this = $(this),\n                data = $this.data('multiselect'),\n                options = $.extend({}, $.fn.multiSelect.defaults, $this.data(), typeof option === 'object' && option);\n\n            if (!data) {\n                $this.data('multiselect', (data = new MultiSelect(this, options)));\n            }\n\n            if (typeof option === 'string') {\n                data[option](args[1]);\n            } else {\n                data.init();\n            }\n        });\n    };\n\n    $.fn.multiSelect.defaults = {\n        keySelect: [32],\n        selectableOptgroup: false,\n        disabledClass: 'disabled',\n        dblClick: false,\n        keepOrder: false,\n        cssClass: '',\n    };\n\n    $.fn.multiSelect.Constructor = MultiSelect;\n\n    $.fn.insertAt = function (index, $parent) {\n        return this.each(function () {\n            if (index === 0) {\n                $parent.prepend(this);\n            } else {\n                $parent.children().eq(index - 1).after(this);\n            }\n        });\n    };\n\n}(window.jQuery);\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvYXNzZXRzL2pzL2FkbWluLmpzIiwic3JjL2Fzc2V0cy9qcy9jb21wb25lbnRzL2ltYWdlLXVwbG9hZC5qcyIsInNyYy9hc3NldHMvanMvY29tcG9uZW50cy9qc29uLWltcG9ydC1leHBvcnQuanMiLCJzcmMvYXNzZXRzL2pzL2NvbXBvbmVudHMvb2MtcXVlcnktdGVzdGVyLmpzIiwic3JjL2Fzc2V0cy9qcy9jb21wb25lbnRzL3NvcnRhYmxlLWxpc3QuanMiLCJzcmMvYXNzZXRzL2pzL2pxdWVyeS9qcXVlcnkubXVsdGktc2VsZWN0LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FDQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDckJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3hFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDN0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2xFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNuREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gcihlLG4sdCl7ZnVuY3Rpb24gbyhpLGYpe2lmKCFuW2ldKXtpZighZVtpXSl7dmFyIGM9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZTtpZighZiYmYylyZXR1cm4gYyhpLCEwKTtpZih1KXJldHVybiB1KGksITApO3ZhciBhPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIraStcIidcIik7dGhyb3cgYS5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGF9dmFyIHA9bltpXT17ZXhwb3J0czp7fX07ZVtpXVswXS5jYWxsKHAuZXhwb3J0cyxmdW5jdGlvbihyKXt2YXIgbj1lW2ldWzFdW3JdO3JldHVybiBvKG58fHIpfSxwLHAuZXhwb3J0cyxyLGUsbix0KX1yZXR1cm4gbltpXS5leHBvcnRzfWZvcih2YXIgdT1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlLGk9MDtpPHQubGVuZ3RoO2krKylvKHRbaV0pO3JldHVybiBvfXJldHVybiByfSkoKSIsInJlcXVpcmUoJy4vY29tcG9uZW50cy9zb3J0YWJsZS1saXN0Jyk7XG5yZXF1aXJlKCcuL2NvbXBvbmVudHMvanNvbi1pbXBvcnQtZXhwb3J0Jyk7XG5yZXF1aXJlKCcuL2pxdWVyeS9qcXVlcnkubXVsdGktc2VsZWN0LmpzJyk7XG5yZXF1aXJlKCcuL2NvbXBvbmVudHMvb2MtcXVlcnktdGVzdGVyJyk7XG5yZXF1aXJlKCcuL2NvbXBvbmVudHMvaW1hZ2UtdXBsb2FkJyk7XG5cbmpRdWVyeShmdW5jdGlvbigkKSB7XG4gICAgJCgnLmV3LXdyYXAgLmV3LXRvb2x0aXAnKS5lYWNoKGZ1bmN0aW9uKCBpLCB0b29sdGlwKSB7XG4gICAgICAgIHZhciB0b29sdGlwQ29udGFpbmVyID0gJCh0b29sdGlwKS5jbG9zZXN0KFwiLmV3LXdyYXBcIik7XG5cbiAgICAgICAgJCh0b29sdGlwKS50b29sdGlwKHtcbiAgICAgICAgICAgIGNvbnRhaW5lcjogdG9vbHRpcENvbnRhaW5lcixcbiAgICAgICAgICAgIHRyaWdnZXI6IFwiZm9jdXNcIixcbiAgICAgICAgICAgIHRvZ2dsZTogXCJ0b29sdGlwXCIsXG4gICAgICAgICAgICBodG1sOiB0cnVlLFxuICAgICAgICAgICAgdGVtcGxhdGU6ICc8ZGl2IGNsYXNzPVwidG9vbHRpcCBldy10b29sdGlwXCIgcm9sZT1cInRvb2x0aXBcIj48ZGl2IGNsYXNzPVwidG9vbHRpcC1hcnJvd1wiPjwvZGl2PjxkaXYgY2xhc3M9XCJ0b29sdGlwLWlubmVyXCI+PC9kaXY+PC9kaXY+J1xuICAgICAgICB9KTtcbiAgICB9KTtcblxuICAgICQoJy5ldy13cmFwIC5ldy1wb3BvdmVyJykucG9wb3ZlcigpO1xufSk7XG4iLCJqUXVlcnkoZnVuY3Rpb24oJCkge1xuICAgICQoZG9jdW1lbnQpLnJlYWR5KCBmdW5jdGlvbihlKSB7XG5cbiAgICAgICAgd2luZG93LkltYWdlVXBsb2FkID0gd2luZG93LkltYWdlVXBsb2FkIHx8IHt9O1xuICAgICAgICB2YXIgSW1hZ2VVcGxvYWQgPSB3aW5kb3cuSW1hZ2VVcGxvYWQ7XG5cbiAgICAgICAgSW1hZ2VVcGxvYWQuZmlsZV9mcmFtZSA9IG51bGw7XG4gICAgICAgIEltYWdlVXBsb2FkLmluaXRpYWxpemVkID0gZmFsc2U7XG4gICAgICAgIEltYWdlVXBsb2FkLnVwbG9hZFRyaWdnZXJlZCA9IGZhbHNlO1xuICAgICAgICBJbWFnZVVwbG9hZC51cGxvYWRCdXR0b24gPSB1bmRlZmluZWQ7XG5cbiAgICAgICAgSW1hZ2VVcGxvYWQuaW5pdCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgSW1hZ2VVcGxvYWQuaW5pdGlhbGl6ZWQgPSB0cnVlO1xuXG4gICAgICAgICAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnLnVwbG9hZF9idXR0b24nLCBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cbiAgICAgICAgICAgICAgICBpZiggSW1hZ2VVcGxvYWQudXBsb2FkVHJpZ2dlcmVkICkgcmV0dXJuO1xuICAgICAgICAgICAgICAgIEltYWdlVXBsb2FkLnVwbG9hZFRyaWdnZXJlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgSW1hZ2VVcGxvYWQudXBsb2FkQnV0dG9uID0gJChlLnRhcmdldCk7XG5cbiAgICAgICAgICAgICAgICBJbWFnZVVwbG9hZC5maWxlX2ZyYW1lID0gd3AubWVkaWEuZnJhbWVzLmZpbGVfZnJhbWUgPSB3cC5tZWRpYSh7XG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiAnUGljdHVyZScsXG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogXCJzZWxlY3RcIlxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBtdWx0aXBsZTogZmFsc2VcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIEltYWdlVXBsb2FkLmZpbGVfZnJhbWUub24oICdzZWxlY3QnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGF0dGFjaG1lbnQgPSBJbWFnZVVwbG9hZC5maWxlX2ZyYW1lLnN0YXRlKCkuZ2V0KCdzZWxlY3Rpb24nKS5maXJzdCgpLnRvSlNPTigpO1xuICAgICAgICAgICAgICAgICAgICBJbWFnZVVwbG9hZC5hcHBlbmRJbWFnZSggYXR0YWNobWVudCApO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgSW1hZ2VVcGxvYWQuZmlsZV9mcmFtZS5vbiggJ2Nsb3NlJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIEltYWdlVXBsb2FkLnVwbG9hZFRyaWdnZXJlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgSW1hZ2VVcGxvYWQuZmlsZV9mcmFtZS5vcGVuKCk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJy5pbWFnZV9wbGFjZWhvbGRlciAucmVtb3ZlJywgSW1hZ2VVcGxvYWQucmVtb3ZlSW1hZ2UgKTtcbiAgICAgICAgfTtcblxuICAgICAgICBJbWFnZVVwbG9hZC5hcHBlbmRJbWFnZSA9IGZ1bmN0aW9uKCBqc29uICkge1xuICAgICAgICAgICAgJChJbWFnZVVwbG9hZC51cGxvYWRCdXR0b24pLnNpYmxpbmdzKCcuaW1hZ2VfcGxhY2Vob2xkZXInKVxuICAgICAgICAgICAgICAgIC5odG1sKFxuICAgICAgICAgICAgICAgICAgICAnPHNwYW4gY2xhc3M9XCJldy1pbWFnZV9fd3JhcHBlciBpbWdfd3JhcHBlclwiPicgK1xuICAgICAgICAgICAgICAgICAgICAnPGltZyBjbGFzcz1cImV3LWltZ19fb2JqZWN0XCIgc3JjPVwiJysgSW1hZ2VVcGxvYWQuY3JlYXRlSW1hZ2VTcmMoanNvbi51cmwpICsnXCIvPicgK1xuICAgICAgICAgICAgICAgICAgICAnPHNwYW4gY2xhc3M9XCJldy1pbWFnZV9faWNvbi0tcmVtb3ZlIHJlbW92ZSBmYSBmYS10aW1lc1wiPjwvc3Bhbj48L3NwYW4+J1xuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAkKEltYWdlVXBsb2FkLnVwbG9hZEJ1dHRvbikuc2libGluZ3MoJy5oaWRkZW4nKS52YWwoanNvbi51cmwpO1xuICAgICAgICAgICAgSW1hZ2VVcGxvYWQudXBsb2FkQnV0dG9uLnZhbCgnQnl0IGJpbGQnKTtcbiAgICAgICAgfTtcblxuICAgICAgICBJbWFnZVVwbG9hZC5jcmVhdGVJbWFnZVNyYyA9IGZ1bmN0aW9uKHVybCkge1xuICAgICAgICAgICAgcmV0dXJuIHVybCArICc/JyArIG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuICAgICAgICB9O1xuXG4gICAgICAgIEltYWdlVXBsb2FkLnJlbW92ZUltYWdlID0gZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgdmFyICRwbGFjZWhvbGRlciA9ICQoZS50YXJnZXQpLnBhcmVudHMoJy5pbWFnZV9wbGFjZWhvbGRlcicpO1xuICAgICAgICAgICAgJHBsYWNlaG9sZGVyLnNpYmxpbmdzKCcuaGlkZGVuJykudmFsKCcnKTtcbiAgICAgICAgICAgICRwbGFjZWhvbGRlci5odG1sKCcnKTtcbiAgICAgICAgICAgIEltYWdlVXBsb2FkLnVwbG9hZEJ1dHRvbi52YWwoJ1bDpGxqIGJpbGQnKTtcbiAgICAgICAgfTtcblxuICAgICAgICBpZiggIUltYWdlVXBsb2FkLmluaXRpYWxpemVkICkge1xuICAgICAgICAgICAgSW1hZ2VVcGxvYWQuaW5pdCgpO1xuICAgICAgICB9XG4gICAgfSk7XG59KTtcbiIsImpRdWVyeShmdW5jdGlvbigkKSB7XG4gICAgdmFyICRtYWluV3JhcHBlciwgJGltcG9ydFdyYXBwZXIsICRleHBvcnRXcmFwcGVyO1xuXG4gICAgJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24gKCkge1xuXG4gICAgICAgIC8vIEltcG9ydCBhbmQgZXhwb3J0XG4gICAgICAgICRtYWluV3JhcHBlciA9ICQoJyNpbXBvcnQtZXhwb3J0X193cmFwcGVyJyk7XG4gICAgICAgICRpbXBvcnRXcmFwcGVyID0gJCgnLmltcG9ydF9fd3JhcHBlcicsICRtYWluV3JhcHBlcik7XG4gICAgICAgICRleHBvcnRXcmFwcGVyID0gJCgnLmV4cG9ydF9fd3JhcHBlcicsICRtYWluV3JhcHBlcik7XG5cbiAgICAgICAgJG1haW5XcmFwcGVyLm9uKCdjbGljaycsICcuZXhwb3J0X19idG4nLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAkZXhwb3J0V3JhcHBlci5zbGlkZVRvZ2dsZSgpO1xuICAgICAgICAgICAgJGV4cG9ydFdyYXBwZXIuZmluZCgndGV4dGFyZWEnKS5zZWxlY3QoKTtcblxuICAgICAgICAgICAgaWYgKCRpbXBvcnRXcmFwcGVyLmlzKFwiOnZpc2libGVcIikpIHtcbiAgICAgICAgICAgICAgICAkaW1wb3J0V3JhcHBlci5zbGlkZVRvZ2dsZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAkbWFpbldyYXBwZXIub24oJ2NsaWNrJywgJy5pbXBvcnRfX2J0bicsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICRpbXBvcnRXcmFwcGVyLnNsaWRlVG9nZ2xlKCk7XG4gICAgICAgICAgICAkaW1wb3J0V3JhcHBlci5maW5kKCd0ZXh0YXJlYScpLnNlbGVjdCgpO1xuXG4gICAgICAgICAgICBpZiAoJGV4cG9ydFdyYXBwZXIuaXMoXCI6dmlzaWJsZVwiKSkge1xuICAgICAgICAgICAgICAgICRleHBvcnRXcmFwcGVyLnNsaWRlVG9nZ2xlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0pO1xufSk7XG4iLCIvKmdsb2JhbCBvY19hamF4Ki9cbi8qZ2xvYmFsIHRyYW5zbGF0aW9uKi9cblxub2NfYWpheC5vY19hamF4X3VybCA9IG9jX2FqYXgub2NfYWpheF91cmwgfHwgJyc7XG50cmFuc2xhdGlvbi5vY19xdWVyeV9yZXN1bHQgPSB0cmFuc2xhdGlvbi5vY19xdWVyeV9yZXN1bHQgfHwgJyc7XG5cbi8vQWpheCB0ZXN0IE9DIHF1ZXJ5IGZyb20gd2lkZ2V0XG5qUXVlcnkoZnVuY3Rpb24oJCkge1xuICAgIHZhciBwb3N0VXJsID0gb2NfYWpheC5vY19hamF4X3VybCB8fCAnJztcbiAgICB2YXIgY2xhc3NlcyA9IHtcbiAgICAgICAgdGVzdFJlc3VsdFdyYXBwZXJMb2FkZWQ6ICdvYy1xdWVyeS1yZXN1bHQtLWxvYWRlZCcsXG4gICAgICAgIHRlc3RSZXN1bHRIZWFkbGluZTogJ29jLXF1ZXJ5LXJlc3VsdF9faGVhZGxpbmUnLFxuICAgICAgICB0ZXN0UmVzdWx0TWVzc2FnZTogJ29jLXF1ZXJ5LXJlc3VsdF9fbWVzc2FnZScsXG4gICAgfTtcbiAgICB2YXIgc2VsZWN0b3JzID0ge1xuICAgICAgICB3cmFwcGVyOiAnLm9jLXF1ZXJ5LWJveCcsXG4gICAgICAgIHRlc3RSZXN1bHRXcmFwcGVyOiAnLm9jLXF1ZXJ5LXJlc3VsdCcsXG4gICAgICAgIHRlc3RCdXR0b246ICcub2MtcXVlcnktdGVzdCcsXG4gICAgICAgIG9jOiB7XG4gICAgICAgICAgICBsaW1pdDogJy5vYy1xdWVyeS1saW1pdCcsXG4gICAgICAgICAgICBxdWVyeTogJy5vYy1xdWVyeS1zZWFyY2gnLFxuICAgICAgICAgICAgc3RhcnQ6ICcub2MtcXVlcnktc3RhcnQnLFxuICAgICAgICAgICAgc29ydDogJy5vYy1xdWVyeS1zb3J0JyxcbiAgICAgICAgfSxcbiAgICB9O1xuXG4gICAgdmFyIHJlc3VsdFdyYXBwZXI7XG5cbiAgICBmdW5jdGlvbiBnZXRRdWVyeURhdGEoJGZvcm1XcmFwcGVyKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBhY3Rpb246ICd0ZXN0X29jX3F1ZXJ5JyxcbiAgICAgICAgICAgIHF1ZXJ5OiAkZm9ybVdyYXBwZXIuZmluZChzZWxlY3RvcnMub2MucXVlcnkpLnZhbCgpLFxuICAgICAgICAgICAgb2NfcXVlcnlfc3RhcnQ6ICRmb3JtV3JhcHBlci5maW5kKHNlbGVjdG9ycy5vYy5zdGFydCkudmFsKCksXG4gICAgICAgICAgICBvY19xdWVyeV9saW1pdDogJGZvcm1XcmFwcGVyLmZpbmQoc2VsZWN0b3JzLm9jLmxpbWl0KS52YWwoKSxcbiAgICAgICAgICAgIG9jX3F1ZXJ5X3NvcnQ6ICRmb3JtV3JhcHBlci5maW5kKHNlbGVjdG9ycy5vYy5zb3J0KS52YWwoKSxcbiAgICAgICAgfVxuICAgIH1cblxuICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsIHNlbGVjdG9ycy50ZXN0QnV0dG9uLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHZhciBlbCA9IGUudGFyZ2V0LFxuICAgICAgICAgICAgJGVsID0gJChlbCksXG4gICAgICAgICAgICAkcGFyZW50ID0gJGVsLmNsb3Nlc3Qoc2VsZWN0b3JzLndyYXBwZXIpLFxuICAgICAgICAgICAgcXVlcnlEYXRhID0gZ2V0UXVlcnlEYXRhKCRlbC5jbG9zZXN0KHNlbGVjdG9ycy53cmFwcGVyKSk7XG5cbiAgICAgICAgcmVzdWx0V3JhcHBlciA9ICRwYXJlbnQuZmluZChzZWxlY3RvcnMudGVzdFJlc3VsdFdyYXBwZXIpO1xuXG4gICAgICAgIHJlc3VsdFdyYXBwZXIuZW1wdHkoKS5hcHBlbmQoJzxpIGNsYXNzPVwiZmEgZmEtc3Bpbm5lciBmYS1zcGluIGZhLTJ4IGZhLWZ3XCI+PC9pPicpLmFkZENsYXNzKGNsYXNzZXMudGVzdFJlc3VsdFdyYXBwZXJMb2FkZWQpO1xuICAgICAgICAkLnBvc3QocG9zdFVybCwgcXVlcnlEYXRhKVxuICAgICAgICAgICAgLmRvbmUoZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gJzxoNCBjbGFzcz1cIm9jLXF1ZXJ5LXJlc3VsdF9faGVhZGxpbmVcIj4nICsgdHJhbnNsYXRpb24ub2NfcXVlcnlfcmVzdWx0ICsgJzwvaDQ+JztcblxuICAgICAgICAgICAgICAgIHZhciBwYXJzZWREYXRhID0gJC5wYXJzZUpTT04oZGF0YSk7XG5cbiAgICAgICAgICAgICAgICBmb3IgKHZhciBvYmogaW4gcGFyc2VkRGF0YSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoe30uaGFzT3duUHJvcGVydHkuY2FsbChwYXJzZWREYXRhLCBvYmopKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgKz0gJzxwIGNsYXNzPVwib2MtcXVlcnktcmVzdWx0X19tZXNzYWdlXCI+JyArIG9iaiArIFwiIDogXCIgKyBwYXJzZWREYXRhW29ial0gKyAnPC9wPic7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICByZXN1bHRXcmFwcGVyLmVtcHR5KCkuYXBwZW5kKHJlc3VsdCk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSk7XG59KTtcbiIsImpRdWVyeShmdW5jdGlvbigkKSB7XG4gICAgdmFyICRsaXN0LFxuICAgICAgICBjbGFzc2VzID0ge1xuICAgICAgICAgICAgbGlzdDogJ3NvcnRhYmxlLWxpc3QnLFxuICAgICAgICAgICAgaXRlbTogJ3NvcnRhYmxlLWxpc3RfX2l0ZW0nLFxuICAgICAgICAgICAgaXRlbUNsb25lOiAnc29ydGFibGUtbGlzdF9faXRlbS0tdGVtcGxhdGUnLFxuICAgICAgICAgICAgZHJhZ0hhbmRsZTogJ3NvcnRhYmxlLWxpc3RfX2RyYWctaGFuZGxlJyxcbiAgICAgICAgICAgIHBsYWNlSG9sZGVyOiAnc29ydGFibGUtcGxhY2Vob2xkZXInLFxuICAgICAgICAgICAgYWRkQnRuOiAnc29ydGFibGUtbGlzdF9faXRlbS1hZGQnLFxuICAgICAgICAgICAgZGVsZXRlQnRuOiAnc29ydGFibGUtbGlzdF9faXRlbS1kZWxldGUnLFxuICAgICAgICB9LFxuICAgICAgICBzZWxlY3RvcnMgPSB7XG4gICAgICAgICAgICBsaXN0OiAnLicgKyBjbGFzc2VzLmxpc3QsXG4gICAgICAgICAgICBpdGVtOiAnLicgKyBjbGFzc2VzLml0ZW0sXG4gICAgICAgICAgICBpdGVtQ2xvbmU6ICcuJyArIGNsYXNzZXMuaXRlbUNsb25lLFxuICAgICAgICAgICAgZHJhZ0hhbmRsZTogJy4nICsgY2xhc3Nlcy5kcmFnSGFuZGxlLFxuICAgICAgICAgICAgYWRkQnRuOiAnLicgKyBjbGFzc2VzLmFkZEJ0bixcbiAgICAgICAgICAgIGRlbGV0ZUJ0bjogJy4nICsgY2xhc3Nlcy5kZWxldGVCdG4sXG4gICAgICAgIH07XG5cbiAgICAkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbiAoKSB7XG4gICAgICAgICRsaXN0ID0gJChzZWxlY3RvcnMubGlzdCkuc29ydGFibGUoe1xuICAgICAgICAgICAgYXhpczogXCJ5XCIsXG4gICAgICAgICAgICBjb250YWlubWVudDogXCJwYXJlbnRcIixcbiAgICAgICAgICAgIGl0ZW1zOiBcIj4gXCIgKyBzZWxlY3RvcnMuaXRlbSxcbiAgICAgICAgICAgIGN1cnNvcjogXCJtb3ZlXCIsXG4gICAgICAgICAgICBoYW5kbGU6IHNlbGVjdG9ycy5kcmFnSGFuZGxlLFxuICAgICAgICAgICAgcGxhY2Vob2xkZXI6IFwic29ydGFibGUtcGxhY2Vob2xkZXJcIixcbiAgICAgICAgICAgIGZvcmNlUGxhY2Vob2xkZXJTaXplOiB0cnVlLFxuICAgICAgICAgICAgdG9sZXJhbmNlOiBcInBvaW50ZXJcIixcbiAgICAgICAgfSk7XG5cbiAgICAgICAgJGxpc3Qub24oJ2NsaWNrJywgc2VsZWN0b3JzLmRlbGV0ZUJ0biwgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICAgICAgdmFyICRyb3cgPSAkKGUudGFyZ2V0KS5jbG9zZXN0KHNlbGVjdG9ycy5pdGVtKS5mYWRlT3V0KDIwMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICRyb3cucmVtb3ZlKClcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcblxuICAgICAgICAkKHNlbGVjdG9ycy5hZGRCdG4pLm9uKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgICAgIHZhciBuZXdJdGVtID0gJChzZWxlY3RvcnMuaXRlbUNsb25lKS5jbG9uZSgpO1xuXG4gICAgICAgICAgICBuZXdJdGVtLnJlbW92ZUNsYXNzKGNsYXNzZXMuaXRlbUNsb25lKS5hcHBlbmRUbygkbGlzdCk7XG5cbiAgICAgICAgICAgIG5ld0l0ZW0uZmluZCgnaW5wdXQnKS5lcSgwKS5mb2N1cygpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbn0pO1xuIiwiLypcbiogTXVsdGlTZWxlY3QgdjAuOS4xMlxuKiBDb3B5cmlnaHQgKGMpIDIwMTIgTG91aXMgQ3VueVxuKlxuKiBUaGlzIHByb2dyYW0gaXMgZnJlZSBzb2Z0d2FyZS4gSXQgY29tZXMgd2l0aG91dCBhbnkgd2FycmFudHksIHRvXG4qIHRoZSBleHRlbnQgcGVybWl0dGVkIGJ5IGFwcGxpY2FibGUgbGF3LiBZb3UgY2FuIHJlZGlzdHJpYnV0ZSBpdFxuKiBhbmQvb3IgbW9kaWZ5IGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgRG8gV2hhdCBUaGUgRnVjayBZb3UgV2FudFxuKiBUbyBQdWJsaWMgTGljZW5zZSwgVmVyc2lvbiAyLCBhcyBwdWJsaXNoZWQgYnkgU2FtIEhvY2V2YXIuIFNlZVxuKiBodHRwOi8vc2FtLnpveS5vcmcvd3RmcGwvQ09QWUlORyBmb3IgbW9yZSBkZXRhaWxzLlxuKi9cblxuIWZ1bmN0aW9uICgkKSB7XG5cbiAgICBcInVzZSBzdHJpY3RcIjtcblxuXG4gICAgLyogTVVMVElTRUxFQ1QgQ0xBU1MgREVGSU5JVElPTlxuICAgICAqID09PT09PT09PT09PT09PT09PT09PT0gKi9cblxuICAgIHZhciBNdWx0aVNlbGVjdCA9IGZ1bmN0aW9uIChlbGVtZW50LCBvcHRpb25zKSB7XG4gICAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgICAgIHRoaXMuJGVsZW1lbnQgPSAkKGVsZW1lbnQpO1xuICAgICAgICB0aGlzLiRjb250YWluZXIgPSAkKCc8ZGl2Lz4nLCB7J2NsYXNzJzogXCJtcy1jb250YWluZXJcIn0pO1xuICAgICAgICB0aGlzLiRzZWxlY3RhYmxlQ29udGFpbmVyID0gJCgnPGRpdi8+JywgeydjbGFzcyc6ICdtcy1zZWxlY3RhYmxlJ30pO1xuICAgICAgICB0aGlzLiRzZWxlY3Rpb25Db250YWluZXIgPSAkKCc8ZGl2Lz4nLCB7J2NsYXNzJzogJ21zLXNlbGVjdGlvbid9KTtcbiAgICAgICAgdGhpcy4kc2VsZWN0YWJsZVVsID0gJCgnPHVsLz4nLCB7J2NsYXNzJzogXCJtcy1saXN0XCIsICd0YWJpbmRleCc6ICctMSd9KTtcbiAgICAgICAgdGhpcy4kc2VsZWN0aW9uVWwgPSAkKCc8dWwvPicsIHsnY2xhc3MnOiBcIm1zLWxpc3RcIiwgJ3RhYmluZGV4JzogJy0xJ30pO1xuICAgICAgICB0aGlzLnNjcm9sbFRvID0gMDtcbiAgICAgICAgdGhpcy5lbGVtc1NlbGVjdG9yID0gJ2xpOnZpc2libGU6bm90KC5tcy1vcHRncm91cC1sYWJlbCwubXMtb3B0Z3JvdXAtY29udGFpbmVyLC4nICsgb3B0aW9ucy5kaXNhYmxlZENsYXNzICsgJyknO1xuICAgIH07XG5cbiAgICBNdWx0aVNlbGVjdC5wcm90b3R5cGUgPSB7XG4gICAgICAgIGNvbnN0cnVjdG9yOiBNdWx0aVNlbGVjdCxcblxuICAgICAgICBpbml0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXMsXG4gICAgICAgICAgICAgICAgbXMgPSB0aGlzLiRlbGVtZW50O1xuXG4gICAgICAgICAgICBpZiAobXMubmV4dCgnLm1zLWNvbnRhaW5lcicpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIG1zLmNzcyh7cG9zaXRpb246ICdhYnNvbHV0ZScsIGxlZnQ6ICctOTk5OXB4J30pO1xuICAgICAgICAgICAgICAgIG1zLmF0dHIoJ2lkJywgbXMuYXR0cignaWQnKSA/IG1zLmF0dHIoJ2lkJykgOiBNYXRoLmNlaWwoTWF0aC5yYW5kb20oKSAqIDEwMDApICsgJ211bHRpc2VsZWN0Jyk7XG4gICAgICAgICAgICAgICAgdGhpcy4kY29udGFpbmVyLmF0dHIoJ2lkJywgJ21zLScgKyBtcy5hdHRyKCdpZCcpKTtcbiAgICAgICAgICAgICAgICB0aGlzLiRjb250YWluZXIuYWRkQ2xhc3ModGhhdC5vcHRpb25zLmNzc0NsYXNzKTtcbiAgICAgICAgICAgICAgICBtcy5maW5kKCdvcHRpb24nKS5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhhdC5nZW5lcmF0ZUxpc0Zyb21PcHRpb24odGhpcyk7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICB0aGlzLiRzZWxlY3Rpb25VbC5maW5kKCcubXMtb3B0Z3JvdXAtbGFiZWwnKS5oaWRlKCk7XG5cbiAgICAgICAgICAgICAgICBpZiAodGhhdC5vcHRpb25zLnNlbGVjdGFibGVIZWFkZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhhdC4kc2VsZWN0YWJsZUNvbnRhaW5lci5hcHBlbmQodGhhdC5vcHRpb25zLnNlbGVjdGFibGVIZWFkZXIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGF0LiRzZWxlY3RhYmxlQ29udGFpbmVyLmFwcGVuZCh0aGF0LiRzZWxlY3RhYmxlVWwpO1xuICAgICAgICAgICAgICAgIGlmICh0aGF0Lm9wdGlvbnMuc2VsZWN0YWJsZUZvb3Rlcikge1xuICAgICAgICAgICAgICAgICAgICB0aGF0LiRzZWxlY3RhYmxlQ29udGFpbmVyLmFwcGVuZCh0aGF0Lm9wdGlvbnMuc2VsZWN0YWJsZUZvb3Rlcik7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKHRoYXQub3B0aW9ucy5zZWxlY3Rpb25IZWFkZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhhdC4kc2VsZWN0aW9uQ29udGFpbmVyLmFwcGVuZCh0aGF0Lm9wdGlvbnMuc2VsZWN0aW9uSGVhZGVyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhhdC4kc2VsZWN0aW9uQ29udGFpbmVyLmFwcGVuZCh0aGF0LiRzZWxlY3Rpb25VbCk7XG4gICAgICAgICAgICAgICAgaWYgKHRoYXQub3B0aW9ucy5zZWxlY3Rpb25Gb290ZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhhdC4kc2VsZWN0aW9uQ29udGFpbmVyLmFwcGVuZCh0aGF0Lm9wdGlvbnMuc2VsZWN0aW9uRm9vdGVyKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB0aGF0LiRjb250YWluZXIuYXBwZW5kKHRoYXQuJHNlbGVjdGFibGVDb250YWluZXIpO1xuICAgICAgICAgICAgICAgIHRoYXQuJGNvbnRhaW5lci5hcHBlbmQodGhhdC4kc2VsZWN0aW9uQ29udGFpbmVyKTtcbiAgICAgICAgICAgICAgICBtcy5hZnRlcih0aGF0LiRjb250YWluZXIpO1xuXG4gICAgICAgICAgICAgICAgdGhhdC5hY3RpdmVNb3VzZSh0aGF0LiRzZWxlY3RhYmxlVWwpO1xuICAgICAgICAgICAgICAgIHRoYXQuYWN0aXZlS2V5Ym9hcmQodGhhdC4kc2VsZWN0YWJsZVVsKTtcblxuICAgICAgICAgICAgICAgIHZhciBhY3Rpb24gPSB0aGF0Lm9wdGlvbnMuZGJsQ2xpY2sgPyAnZGJsY2xpY2snIDogJ2NsaWNrJztcblxuICAgICAgICAgICAgICAgIHRoYXQuJHNlbGVjdGFibGVVbC5vbihhY3Rpb24sICcubXMtZWxlbS1zZWxlY3RhYmxlJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICB0aGF0LnNlbGVjdCgkKHRoaXMpLmRhdGEoJ21zLXZhbHVlJykpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRoYXQuJHNlbGVjdGlvblVsLm9uKGFjdGlvbiwgJy5tcy1lbGVtLXNlbGVjdGlvbicsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhhdC5kZXNlbGVjdCgkKHRoaXMpLmRhdGEoJ21zLXZhbHVlJykpO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgdGhhdC5hY3RpdmVNb3VzZSh0aGF0LiRzZWxlY3Rpb25VbCk7XG4gICAgICAgICAgICAgICAgdGhhdC5hY3RpdmVLZXlib2FyZCh0aGF0LiRzZWxlY3Rpb25VbCk7XG5cbiAgICAgICAgICAgICAgICBtcy5vbignZm9jdXMnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoYXQuJHNlbGVjdGFibGVVbC5mb2N1cygpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgc2VsZWN0ZWRWYWx1ZXMgPSBtcy5maW5kKCdvcHRpb246c2VsZWN0ZWQnKS5tYXAoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiAkKHRoaXMpLnZhbCgpO1xuICAgICAgICAgICAgfSkuZ2V0KCk7XG4gICAgICAgICAgICB0aGF0LnNlbGVjdChzZWxlY3RlZFZhbHVlcywgJ2luaXQnKTtcblxuICAgICAgICAgICAgaWYgKHR5cGVvZiB0aGF0Lm9wdGlvbnMuYWZ0ZXJJbml0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgdGhhdC5vcHRpb25zLmFmdGVySW5pdC5jYWxsKHRoaXMsIHRoaXMuJGNvbnRhaW5lcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgJ2dlbmVyYXRlTGlzRnJvbU9wdGlvbic6IGZ1bmN0aW9uIChvcHRpb24sIGluZGV4LCAkY29udGFpbmVyKSB7XG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXMsXG4gICAgICAgICAgICAgICAgbXMgPSB0aGF0LiRlbGVtZW50LFxuICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXMgPSBcIlwiLFxuICAgICAgICAgICAgICAgICRvcHRpb24gPSAkKG9wdGlvbik7XG5cbiAgICAgICAgICAgIGZvciAodmFyIGNwdCA9IDA7IGNwdCA8IG9wdGlvbi5hdHRyaWJ1dGVzLmxlbmd0aDsgY3B0KyspIHtcbiAgICAgICAgICAgICAgICB2YXIgYXR0ciA9IG9wdGlvbi5hdHRyaWJ1dGVzW2NwdF07XG5cbiAgICAgICAgICAgICAgICBpZiAoYXR0ci5uYW1lICE9PSAndmFsdWUnICYmIGF0dHIubmFtZSAhPT0gJ2Rpc2FibGVkJykge1xuICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzICs9IGF0dHIubmFtZSArICc9XCInICsgYXR0ci52YWx1ZSArICdcIiAnO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBzZWxlY3RhYmxlTGkgPSAkKCc8bGkgJyArIGF0dHJpYnV0ZXMgKyAnPjxzcGFuPicgKyB0aGF0LmVzY2FwZUhUTUwoJG9wdGlvbi50ZXh0KCkpICsgJzwvc3Bhbj48L2xpPicpLFxuICAgICAgICAgICAgICAgIHNlbGVjdGVkTGkgPSBzZWxlY3RhYmxlTGkuY2xvbmUoKSxcbiAgICAgICAgICAgICAgICB2YWx1ZSA9ICRvcHRpb24udmFsKCksXG4gICAgICAgICAgICAgICAgZWxlbWVudElkID0gdGhhdC5zYW5pdGl6ZSh2YWx1ZSk7XG5cbiAgICAgICAgICAgIHNlbGVjdGFibGVMaVxuICAgICAgICAgICAgICAgIC5kYXRhKCdtcy12YWx1ZScsIHZhbHVlKVxuICAgICAgICAgICAgICAgIC5hZGRDbGFzcygnbXMtZWxlbS1zZWxlY3RhYmxlJylcbiAgICAgICAgICAgICAgICAuYXR0cignaWQnLCBlbGVtZW50SWQgKyAnLXNlbGVjdGFibGUnKTtcblxuICAgICAgICAgICAgc2VsZWN0ZWRMaVxuICAgICAgICAgICAgICAgIC5kYXRhKCdtcy12YWx1ZScsIHZhbHVlKVxuICAgICAgICAgICAgICAgIC5hZGRDbGFzcygnbXMtZWxlbS1zZWxlY3Rpb24nKVxuICAgICAgICAgICAgICAgIC5hdHRyKCdpZCcsIGVsZW1lbnRJZCArICctc2VsZWN0aW9uJylcbiAgICAgICAgICAgICAgICAuaGlkZSgpO1xuXG4gICAgICAgICAgICBpZiAoJG9wdGlvbi5wcm9wKCdkaXNhYmxlZCcpIHx8IG1zLnByb3AoJ2Rpc2FibGVkJykpIHtcbiAgICAgICAgICAgICAgICBzZWxlY3RlZExpLmFkZENsYXNzKHRoYXQub3B0aW9ucy5kaXNhYmxlZENsYXNzKTtcbiAgICAgICAgICAgICAgICBzZWxlY3RhYmxlTGkuYWRkQ2xhc3ModGhhdC5vcHRpb25zLmRpc2FibGVkQ2xhc3MpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgJG9wdGdyb3VwID0gJG9wdGlvbi5wYXJlbnQoJ29wdGdyb3VwJyk7XG5cbiAgICAgICAgICAgIGlmICgkb3B0Z3JvdXAubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIHZhciBvcHRncm91cExhYmVsID0gJG9wdGdyb3VwLmF0dHIoJ2xhYmVsJyksXG4gICAgICAgICAgICAgICAgICAgIG9wdGdyb3VwSWQgPSB0aGF0LnNhbml0aXplKG9wdGdyb3VwTGFiZWwpLFxuICAgICAgICAgICAgICAgICAgICAkc2VsZWN0YWJsZU9wdGdyb3VwID0gdGhhdC4kc2VsZWN0YWJsZVVsLmZpbmQoJyNvcHRncm91cC1zZWxlY3RhYmxlLScgKyBvcHRncm91cElkKSxcbiAgICAgICAgICAgICAgICAgICAgJHNlbGVjdGlvbk9wdGdyb3VwID0gdGhhdC4kc2VsZWN0aW9uVWwuZmluZCgnI29wdGdyb3VwLXNlbGVjdGlvbi0nICsgb3B0Z3JvdXBJZCk7XG5cbiAgICAgICAgICAgICAgICBpZiAoJHNlbGVjdGFibGVPcHRncm91cC5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG9wdGdyb3VwQ29udGFpbmVyVHBsID0gJzxsaSBjbGFzcz1cIm1zLW9wdGdyb3VwLWNvbnRhaW5lclwiPjwvbGk+JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wdGdyb3VwVHBsID0gJzx1bCBjbGFzcz1cIm1zLW9wdGdyb3VwXCI+PGxpIGNsYXNzPVwibXMtb3B0Z3JvdXAtbGFiZWxcIj48c3Bhbj4nICsgb3B0Z3JvdXBMYWJlbCArICc8L3NwYW4+PC9saT48L3VsPic7XG5cbiAgICAgICAgICAgICAgICAgICAgJHNlbGVjdGFibGVPcHRncm91cCA9ICQob3B0Z3JvdXBDb250YWluZXJUcGwpO1xuICAgICAgICAgICAgICAgICAgICAkc2VsZWN0aW9uT3B0Z3JvdXAgPSAkKG9wdGdyb3VwQ29udGFpbmVyVHBsKTtcbiAgICAgICAgICAgICAgICAgICAgJHNlbGVjdGFibGVPcHRncm91cC5hdHRyKCdpZCcsICdvcHRncm91cC1zZWxlY3RhYmxlLScgKyBvcHRncm91cElkKTtcbiAgICAgICAgICAgICAgICAgICAgJHNlbGVjdGlvbk9wdGdyb3VwLmF0dHIoJ2lkJywgJ29wdGdyb3VwLXNlbGVjdGlvbi0nICsgb3B0Z3JvdXBJZCk7XG4gICAgICAgICAgICAgICAgICAgICRzZWxlY3RhYmxlT3B0Z3JvdXAuYXBwZW5kKCQob3B0Z3JvdXBUcGwpKTtcbiAgICAgICAgICAgICAgICAgICAgJHNlbGVjdGlvbk9wdGdyb3VwLmFwcGVuZCgkKG9wdGdyb3VwVHBsKSk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGF0Lm9wdGlvbnMuc2VsZWN0YWJsZU9wdGdyb3VwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkc2VsZWN0YWJsZU9wdGdyb3VwLmZpbmQoJy5tcy1vcHRncm91cC1sYWJlbCcpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdmFsdWVzID0gJG9wdGdyb3VwLmNoaWxkcmVuKCc6bm90KDpzZWxlY3RlZCwgOmRpc2FibGVkKScpLm1hcChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAkKHRoaXMpLnZhbCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLmdldCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQuc2VsZWN0KHZhbHVlcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICRzZWxlY3Rpb25PcHRncm91cC5maW5kKCcubXMtb3B0Z3JvdXAtbGFiZWwnKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZhbHVlcyA9ICRvcHRncm91cC5jaGlsZHJlbignOnNlbGVjdGVkOm5vdCg6ZGlzYWJsZWQpJykubWFwKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICQodGhpcykudmFsKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkuZ2V0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC5kZXNlbGVjdCh2YWx1ZXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhhdC4kc2VsZWN0YWJsZVVsLmFwcGVuZCgkc2VsZWN0YWJsZU9wdGdyb3VwKTtcbiAgICAgICAgICAgICAgICAgICAgdGhhdC4kc2VsZWN0aW9uVWwuYXBwZW5kKCRzZWxlY3Rpb25PcHRncm91cCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGluZGV4ID0gaW5kZXggPT09IHVuZGVmaW5lZCA/ICRzZWxlY3RhYmxlT3B0Z3JvdXAuZmluZCgndWwnKS5jaGlsZHJlbigpLmxlbmd0aCA6IGluZGV4ICsgMTtcbiAgICAgICAgICAgICAgICBzZWxlY3RhYmxlTGkuaW5zZXJ0QXQoaW5kZXgsICRzZWxlY3RhYmxlT3B0Z3JvdXAuY2hpbGRyZW4oKSk7XG4gICAgICAgICAgICAgICAgc2VsZWN0ZWRMaS5pbnNlcnRBdChpbmRleCwgJHNlbGVjdGlvbk9wdGdyb3VwLmNoaWxkcmVuKCkpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpbmRleCA9IGluZGV4ID09PSB1bmRlZmluZWQgPyB0aGF0LiRzZWxlY3RhYmxlVWwuY2hpbGRyZW4oKS5sZW5ndGggOiBpbmRleDtcblxuICAgICAgICAgICAgICAgIHNlbGVjdGFibGVMaS5pbnNlcnRBdChpbmRleCwgdGhhdC4kc2VsZWN0YWJsZVVsKTtcbiAgICAgICAgICAgICAgICBzZWxlY3RlZExpLmluc2VydEF0KGluZGV4LCB0aGF0LiRzZWxlY3Rpb25VbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgJ2FkZE9wdGlvbic6IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG5cbiAgICAgICAgICAgIGlmIChvcHRpb25zLnZhbHVlICE9PSB1bmRlZmluZWQgJiYgb3B0aW9ucy52YWx1ZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIG9wdGlvbnMgPSBbb3B0aW9uc107XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAkLmVhY2gob3B0aW9ucywgZnVuY3Rpb24gKGluZGV4LCBvcHRpb24pIHtcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9uLnZhbHVlICE9PSB1bmRlZmluZWQgJiYgb3B0aW9uLnZhbHVlICE9PSBudWxsICYmXG4gICAgICAgICAgICAgICAgICAgIHRoYXQuJGVsZW1lbnQuZmluZChcIm9wdGlvblt2YWx1ZT0nXCIgKyBvcHRpb24udmFsdWUgKyBcIiddXCIpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgJG9wdGlvbiA9ICQoJzxvcHRpb24gdmFsdWU9XCInICsgb3B0aW9uLnZhbHVlICsgJ1wiPicgKyBvcHRpb24udGV4dCArICc8L29wdGlvbj4nKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4ID0gcGFyc2VJbnQoKHR5cGVvZiBvcHRpb24uaW5kZXggPT09ICd1bmRlZmluZWQnID8gdGhhdC4kZWxlbWVudC5jaGlsZHJlbigpLmxlbmd0aCA6IG9wdGlvbi5pbmRleCkpLFxuICAgICAgICAgICAgICAgICAgICAgICAgJGNvbnRhaW5lciA9IG9wdGlvbi5uZXN0ZWQgPT09IHVuZGVmaW5lZCA/IHRoYXQuJGVsZW1lbnQgOiAkKFwib3B0Z3JvdXBbbGFiZWw9J1wiICsgb3B0aW9uLm5lc3RlZCArIFwiJ11cIik7XG5cbiAgICAgICAgICAgICAgICAgICAgJG9wdGlvbi5pbnNlcnRBdChpbmRleCwgJGNvbnRhaW5lcik7XG4gICAgICAgICAgICAgICAgICAgIHRoYXQuZ2VuZXJhdGVMaXNGcm9tT3B0aW9uKCRvcHRpb24uZ2V0KDApLCBpbmRleCwgb3B0aW9uLm5lc3RlZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgJ2VzY2FwZUhUTUwnOiBmdW5jdGlvbiAodGV4dCkge1xuICAgICAgICAgICAgcmV0dXJuICQoXCI8ZGl2PlwiKS50ZXh0KHRleHQpLmh0bWwoKTtcbiAgICAgICAgfSxcblxuICAgICAgICAnYWN0aXZlS2V5Ym9hcmQnOiBmdW5jdGlvbiAoJGxpc3QpIHtcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcblxuICAgICAgICAgICAgJGxpc3Qub24oJ2ZvY3VzJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICQodGhpcykuYWRkQ2xhc3MoJ21zLWZvY3VzJyk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5vbignYmx1cicsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5yZW1vdmVDbGFzcygnbXMtZm9jdXMnKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5vbigna2V5ZG93bicsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoZS53aGljaCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA0MDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzg6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC5tb3ZlSGlnaGxpZ2h0KCQodGhpcyksIChlLndoaWNoID09PSAzOCkgPyAtMSA6IDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzc6XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM5OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQuc3dpdGNoTGlzdCgkbGlzdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA5OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGF0LiRlbGVtZW50LmlzKCdbdGFiaW5kZXhdJykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGFiaW5kZXggPSBwYXJzZUludCh0aGF0LiRlbGVtZW50LmF0dHIoJ3RhYmluZGV4JyksIDEwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFiaW5kZXggPSAoZS5zaGlmdEtleSkgPyB0YWJpbmRleCAtIDEgOiB0YWJpbmRleCArIDE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJ1t0YWJpbmRleD1cIicgKyAodGFiaW5kZXgpICsgJ1wiXScpLmZvY3VzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS5zaGlmdEtleSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC4kZWxlbWVudC50cmlnZ2VyKCdmb2N1cycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmICgkLmluQXJyYXkoZS53aGljaCwgdGhhdC5vcHRpb25zLmtleVNlbGVjdCkgPiAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQuc2VsZWN0SGlnaGxpZ2h0ZWQoJGxpc3QpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgJ21vdmVIaWdobGlnaHQnOiBmdW5jdGlvbiAoJGxpc3QsIGRpcmVjdGlvbikge1xuICAgICAgICAgICAgdmFyICRlbGVtcyA9ICRsaXN0LmZpbmQodGhpcy5lbGVtc1NlbGVjdG9yKSxcbiAgICAgICAgICAgICAgICAkY3VyckVsZW0gPSAkZWxlbXMuZmlsdGVyKCcubXMtaG92ZXInKSxcbiAgICAgICAgICAgICAgICAkbmV4dEVsZW0gPSBudWxsLFxuICAgICAgICAgICAgICAgIGVsZW1IZWlnaHQgPSAkZWxlbXMuZmlyc3QoKS5vdXRlckhlaWdodCgpLFxuICAgICAgICAgICAgICAgIGNvbnRhaW5lckhlaWdodCA9ICRsaXN0LmhlaWdodCgpLFxuICAgICAgICAgICAgICAgIGNvbnRhaW5lclNlbGVjdG9yID0gJyMnICsgdGhpcy4kY29udGFpbmVyLnByb3AoJ2lkJyk7XG5cbiAgICAgICAgICAgICRlbGVtcy5yZW1vdmVDbGFzcygnbXMtaG92ZXInKTtcbiAgICAgICAgICAgIGlmIChkaXJlY3Rpb24gPT09IDEpIHsgLy8gRE9XTlxuXG4gICAgICAgICAgICAgICAgJG5leHRFbGVtID0gJGN1cnJFbGVtLm5leHRBbGwodGhpcy5lbGVtc1NlbGVjdG9yKS5maXJzdCgpO1xuICAgICAgICAgICAgICAgIGlmICgkbmV4dEVsZW0ubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciAkb3B0Z3JvdXBVbCA9ICRjdXJyRWxlbS5wYXJlbnQoKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoJG9wdGdyb3VwVWwuaGFzQ2xhc3MoJ21zLW9wdGdyb3VwJykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciAkb3B0Z3JvdXBMaSA9ICRvcHRncm91cFVsLnBhcmVudCgpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRuZXh0T3B0Z3JvdXBMaSA9ICRvcHRncm91cExpLm5leHQoJzp2aXNpYmxlJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkbmV4dE9wdGdyb3VwTGkubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRuZXh0RWxlbSA9ICRuZXh0T3B0Z3JvdXBMaS5maW5kKHRoaXMuZWxlbXNTZWxlY3RvcikuZmlyc3QoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJG5leHRFbGVtID0gJGVsZW1zLmZpcnN0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkbmV4dEVsZW0gPSAkZWxlbXMuZmlyc3QoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZGlyZWN0aW9uID09PSAtMSkgeyAvLyBVUFxuXG4gICAgICAgICAgICAgICAgJG5leHRFbGVtID0gJGN1cnJFbGVtLnByZXZBbGwodGhpcy5lbGVtc1NlbGVjdG9yKS5maXJzdCgpO1xuICAgICAgICAgICAgICAgIGlmICgkbmV4dEVsZW0ubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciAkb3B0Z3JvdXBVbCA9ICRjdXJyRWxlbS5wYXJlbnQoKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoJG9wdGdyb3VwVWwuaGFzQ2xhc3MoJ21zLW9wdGdyb3VwJykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciAkb3B0Z3JvdXBMaSA9ICRvcHRncm91cFVsLnBhcmVudCgpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRwcmV2T3B0Z3JvdXBMaSA9ICRvcHRncm91cExpLnByZXYoJzp2aXNpYmxlJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkcHJldk9wdGdyb3VwTGkubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRuZXh0RWxlbSA9ICRwcmV2T3B0Z3JvdXBMaS5maW5kKHRoaXMuZWxlbXNTZWxlY3RvcikubGFzdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkbmV4dEVsZW0gPSAkZWxlbXMubGFzdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgJG5leHRFbGVtID0gJGVsZW1zLmxhc3QoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICgkbmV4dEVsZW0ubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICRuZXh0RWxlbS5hZGRDbGFzcygnbXMtaG92ZXInKTtcbiAgICAgICAgICAgICAgICB2YXIgc2Nyb2xsVG8gPSAkbGlzdC5zY3JvbGxUb3AoKSArICRuZXh0RWxlbS5wb3NpdGlvbigpLnRvcCAtXG4gICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lckhlaWdodCAvIDIgKyBlbGVtSGVpZ2h0IC8gMjtcblxuICAgICAgICAgICAgICAgICRsaXN0LnNjcm9sbFRvcChzY3JvbGxUbyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgJ3NlbGVjdEhpZ2hsaWdodGVkJzogZnVuY3Rpb24gKCRsaXN0KSB7XG4gICAgICAgICAgICB2YXIgJGVsZW1zID0gJGxpc3QuZmluZCh0aGlzLmVsZW1zU2VsZWN0b3IpLFxuICAgICAgICAgICAgICAgICRoaWdobGlnaHRlZEVsZW0gPSAkZWxlbXMuZmlsdGVyKCcubXMtaG92ZXInKS5maXJzdCgpO1xuXG4gICAgICAgICAgICBpZiAoJGhpZ2hsaWdodGVkRWxlbS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgaWYgKCRsaXN0LnBhcmVudCgpLmhhc0NsYXNzKCdtcy1zZWxlY3RhYmxlJykpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3QoJGhpZ2hsaWdodGVkRWxlbS5kYXRhKCdtcy12YWx1ZScpKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRlc2VsZWN0KCRoaWdobGlnaHRlZEVsZW0uZGF0YSgnbXMtdmFsdWUnKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICRlbGVtcy5yZW1vdmVDbGFzcygnbXMtaG92ZXInKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICAnc3dpdGNoTGlzdCc6IGZ1bmN0aW9uICgkbGlzdCkge1xuICAgICAgICAgICAgJGxpc3QuYmx1cigpO1xuICAgICAgICAgICAgdGhpcy4kY29udGFpbmVyLmZpbmQodGhpcy5lbGVtc1NlbGVjdG9yKS5yZW1vdmVDbGFzcygnbXMtaG92ZXInKTtcbiAgICAgICAgICAgIGlmICgkbGlzdC5wYXJlbnQoKS5oYXNDbGFzcygnbXMtc2VsZWN0YWJsZScpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy4kc2VsZWN0aW9uVWwuZm9jdXMoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy4kc2VsZWN0YWJsZVVsLmZvY3VzKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgJ2FjdGl2ZU1vdXNlJzogZnVuY3Rpb24gKCRsaXN0KSB7XG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG5cbiAgICAgICAgICAgIHRoaXMuJGNvbnRhaW5lci5vbignbW91c2VlbnRlcicsIHRoYXQuZWxlbXNTZWxlY3RvciwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICQodGhpcykucGFyZW50cygnLm1zLWNvbnRhaW5lcicpLmZpbmQodGhhdC5lbGVtc1NlbGVjdG9yKS5yZW1vdmVDbGFzcygnbXMtaG92ZXInKTtcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmFkZENsYXNzKCdtcy1ob3ZlcicpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHRoaXMuJGNvbnRhaW5lci5vbignbW91c2VsZWF2ZScsIHRoYXQuZWxlbXNTZWxlY3RvciwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICQodGhpcykucGFyZW50cygnLm1zLWNvbnRhaW5lcicpLmZpbmQodGhhdC5lbGVtc1NlbGVjdG9yKS5yZW1vdmVDbGFzcygnbXMtaG92ZXInKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuXG4gICAgICAgICdyZWZyZXNoJzogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5kZXN0cm95KCk7XG4gICAgICAgICAgICB0aGlzLiRlbGVtZW50Lm11bHRpU2VsZWN0KHRoaXMub3B0aW9ucyk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgJ2Rlc3Ryb3knOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAkKFwiI21zLVwiICsgdGhpcy4kZWxlbWVudC5hdHRyKFwiaWRcIikpLnJlbW92ZSgpO1xuICAgICAgICAgICAgdGhpcy4kZWxlbWVudC5vZmYoJ2ZvY3VzJyk7XG4gICAgICAgICAgICB0aGlzLiRlbGVtZW50LmNzcygncG9zaXRpb24nLCAnJykuY3NzKCdsZWZ0JywgJycpO1xuICAgICAgICAgICAgdGhpcy4kZWxlbWVudC5yZW1vdmVEYXRhKCdtdWx0aXNlbGVjdCcpO1xuICAgICAgICB9LFxuXG4gICAgICAgICdzZWxlY3QnOiBmdW5jdGlvbiAodmFsdWUsIG1ldGhvZCkge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IFt2YWx1ZV07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcyxcbiAgICAgICAgICAgICAgICBtcyA9IHRoaXMuJGVsZW1lbnQsXG4gICAgICAgICAgICAgICAgbXNJZHMgPSAkLm1hcCh2YWx1ZSwgZnVuY3Rpb24gKHZhbCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gKHRoYXQuc2FuaXRpemUodmFsKSk7XG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgc2VsZWN0YWJsZXMgPSB0aGlzLiRzZWxlY3RhYmxlVWwuZmluZCgnIycgKyBtc0lkcy5qb2luKCctc2VsZWN0YWJsZSwgIycpICsgJy1zZWxlY3RhYmxlJykuZmlsdGVyKCc6bm90KC4nICsgdGhhdC5vcHRpb25zLmRpc2FibGVkQ2xhc3MgKyAnKScpLFxuICAgICAgICAgICAgICAgIHNlbGVjdGlvbnMgPSB0aGlzLiRzZWxlY3Rpb25VbC5maW5kKCcjJyArIG1zSWRzLmpvaW4oJy1zZWxlY3Rpb24sICMnKSArICctc2VsZWN0aW9uJykuZmlsdGVyKCc6bm90KC4nICsgdGhhdC5vcHRpb25zLmRpc2FibGVkQ2xhc3MgKyAnKScpLFxuICAgICAgICAgICAgICAgIG9wdGlvbnMgPSBtcy5maW5kKCdvcHRpb246bm90KDpkaXNhYmxlZCknKS5maWx0ZXIoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gKCQuaW5BcnJheSh0aGlzLnZhbHVlLCB2YWx1ZSkgPiAtMSk7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGlmIChtZXRob2QgPT09ICdpbml0Jykge1xuICAgICAgICAgICAgICAgIHNlbGVjdGFibGVzID0gdGhpcy4kc2VsZWN0YWJsZVVsLmZpbmQoJyMnICsgbXNJZHMuam9pbignLXNlbGVjdGFibGUsICMnKSArICctc2VsZWN0YWJsZScpLFxuICAgICAgICAgICAgICAgICAgICBzZWxlY3Rpb25zID0gdGhpcy4kc2VsZWN0aW9uVWwuZmluZCgnIycgKyBtc0lkcy5qb2luKCctc2VsZWN0aW9uLCAjJykgKyAnLXNlbGVjdGlvbicpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoc2VsZWN0YWJsZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIHNlbGVjdGFibGVzLmFkZENsYXNzKCdtcy1zZWxlY3RlZCcpLmhpZGUoKTtcbiAgICAgICAgICAgICAgICBzZWxlY3Rpb25zLmFkZENsYXNzKCdtcy1zZWxlY3RlZCcpLnNob3coKTtcblxuICAgICAgICAgICAgICAgIG9wdGlvbnMucHJvcCgnc2VsZWN0ZWQnLCB0cnVlKTtcblxuICAgICAgICAgICAgICAgIHRoYXQuJGNvbnRhaW5lci5maW5kKHRoYXQuZWxlbXNTZWxlY3RvcikucmVtb3ZlQ2xhc3MoJ21zLWhvdmVyJyk7XG5cbiAgICAgICAgICAgICAgICB2YXIgc2VsZWN0YWJsZU9wdGdyb3VwcyA9IHRoYXQuJHNlbGVjdGFibGVVbC5jaGlsZHJlbignLm1zLW9wdGdyb3VwLWNvbnRhaW5lcicpO1xuICAgICAgICAgICAgICAgIGlmIChzZWxlY3RhYmxlT3B0Z3JvdXBzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0YWJsZU9wdGdyb3Vwcy5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzZWxlY3RhYmxlc0xpID0gJCh0aGlzKS5maW5kKCcubXMtZWxlbS1zZWxlY3RhYmxlJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2VsZWN0YWJsZXNMaS5sZW5ndGggPT09IHNlbGVjdGFibGVzTGkuZmlsdGVyKCcubXMtc2VsZWN0ZWQnKS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmZpbmQoJy5tcy1vcHRncm91cC1sYWJlbCcpLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIHNlbGVjdGlvbk9wdGdyb3VwcyA9IHRoYXQuJHNlbGVjdGlvblVsLmNoaWxkcmVuKCcubXMtb3B0Z3JvdXAtY29udGFpbmVyJyk7XG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGlvbk9wdGdyb3Vwcy5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzZWxlY3Rpb25zTGkgPSAkKHRoaXMpLmZpbmQoJy5tcy1lbGVtLXNlbGVjdGlvbicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNlbGVjdGlvbnNMaS5maWx0ZXIoJy5tcy1zZWxlY3RlZCcpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmZpbmQoJy5tcy1vcHRncm91cC1sYWJlbCcpLnNob3coKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoYXQub3B0aW9ucy5rZWVwT3JkZXIgJiYgbWV0aG9kICE9PSAnaW5pdCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzZWxlY3Rpb25MaUxhc3QgPSB0aGF0LiRzZWxlY3Rpb25VbC5maW5kKCcubXMtc2VsZWN0ZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoc2VsZWN0aW9uTGlMYXN0Lmxlbmd0aCA+IDEpICYmIChzZWxlY3Rpb25MaUxhc3QubGFzdCgpLmdldCgwKSAhPSBzZWxlY3Rpb25zLmdldCgwKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3Rpb25zLmluc2VydEFmdGVyKHNlbGVjdGlvbkxpTGFzdC5sYXN0KCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChtZXRob2QgIT09ICdpbml0Jykge1xuICAgICAgICAgICAgICAgICAgICBtcy50cmlnZ2VyKCdjaGFuZ2UnKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB0aGF0Lm9wdGlvbnMuYWZ0ZXJTZWxlY3QgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQub3B0aW9ucy5hZnRlclNlbGVjdC5jYWxsKHRoaXMsIHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICAnZGVzZWxlY3QnOiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgdmFsdWUgPSBbdmFsdWVdO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXMsXG4gICAgICAgICAgICAgICAgbXMgPSB0aGlzLiRlbGVtZW50LFxuICAgICAgICAgICAgICAgIG1zSWRzID0gJC5tYXAodmFsdWUsIGZ1bmN0aW9uICh2YWwpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICh0aGF0LnNhbml0aXplKHZhbCkpO1xuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIHNlbGVjdGFibGVzID0gdGhpcy4kc2VsZWN0YWJsZVVsLmZpbmQoJyMnICsgbXNJZHMuam9pbignLXNlbGVjdGFibGUsICMnKSArICctc2VsZWN0YWJsZScpLFxuICAgICAgICAgICAgICAgIHNlbGVjdGlvbnMgPSB0aGlzLiRzZWxlY3Rpb25VbC5maW5kKCcjJyArIG1zSWRzLmpvaW4oJy1zZWxlY3Rpb24sICMnKSArICctc2VsZWN0aW9uJykuZmlsdGVyKCcubXMtc2VsZWN0ZWQnKS5maWx0ZXIoJzpub3QoLicgKyB0aGF0Lm9wdGlvbnMuZGlzYWJsZWRDbGFzcyArICcpJyksXG4gICAgICAgICAgICAgICAgb3B0aW9ucyA9IG1zLmZpbmQoJ29wdGlvbicpLmZpbHRlcihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAoJC5pbkFycmF5KHRoaXMudmFsdWUsIHZhbHVlKSA+IC0xKTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgaWYgKHNlbGVjdGlvbnMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIHNlbGVjdGFibGVzLnJlbW92ZUNsYXNzKCdtcy1zZWxlY3RlZCcpLnNob3coKTtcbiAgICAgICAgICAgICAgICBzZWxlY3Rpb25zLnJlbW92ZUNsYXNzKCdtcy1zZWxlY3RlZCcpLmhpZGUoKTtcbiAgICAgICAgICAgICAgICBvcHRpb25zLnByb3AoJ3NlbGVjdGVkJywgZmFsc2UpO1xuXG4gICAgICAgICAgICAgICAgdGhhdC4kY29udGFpbmVyLmZpbmQodGhhdC5lbGVtc1NlbGVjdG9yKS5yZW1vdmVDbGFzcygnbXMtaG92ZXInKTtcblxuICAgICAgICAgICAgICAgIHZhciBzZWxlY3RhYmxlT3B0Z3JvdXBzID0gdGhhdC4kc2VsZWN0YWJsZVVsLmNoaWxkcmVuKCcubXMtb3B0Z3JvdXAtY29udGFpbmVyJyk7XG4gICAgICAgICAgICAgICAgaWYgKHNlbGVjdGFibGVPcHRncm91cHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBzZWxlY3RhYmxlT3B0Z3JvdXBzLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNlbGVjdGFibGVzTGkgPSAkKHRoaXMpLmZpbmQoJy5tcy1lbGVtLXNlbGVjdGFibGUnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZWxlY3RhYmxlc0xpLmZpbHRlcignOm5vdCgubXMtc2VsZWN0ZWQpJykubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykuZmluZCgnLm1zLW9wdGdyb3VwLWxhYmVsJykuc2hvdygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgc2VsZWN0aW9uT3B0Z3JvdXBzID0gdGhhdC4kc2VsZWN0aW9uVWwuY2hpbGRyZW4oJy5tcy1vcHRncm91cC1jb250YWluZXInKTtcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0aW9uT3B0Z3JvdXBzLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNlbGVjdGlvbnNMaSA9ICQodGhpcykuZmluZCgnLm1zLWVsZW0tc2VsZWN0aW9uJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2VsZWN0aW9uc0xpLmZpbHRlcignLm1zLXNlbGVjdGVkJykubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5maW5kKCcubXMtb3B0Z3JvdXAtbGFiZWwnKS5oaWRlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBtcy50cmlnZ2VyKCdjaGFuZ2UnKTtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRoYXQub3B0aW9ucy5hZnRlckRlc2VsZWN0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoYXQub3B0aW9ucy5hZnRlckRlc2VsZWN0LmNhbGwodGhpcywgdmFsdWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICAnc2VsZWN0X2FsbCc6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBtcyA9IHRoaXMuJGVsZW1lbnQsXG4gICAgICAgICAgICAgICAgdmFsdWVzID0gbXMudmFsKCk7XG5cbiAgICAgICAgICAgIG1zLmZpbmQoJ29wdGlvbjpub3QoXCI6ZGlzYWJsZWRcIiknKS5wcm9wKCdzZWxlY3RlZCcsIHRydWUpO1xuICAgICAgICAgICAgdGhpcy4kc2VsZWN0YWJsZVVsLmZpbmQoJy5tcy1lbGVtLXNlbGVjdGFibGUnKS5maWx0ZXIoJzpub3QoLicgKyB0aGlzLm9wdGlvbnMuZGlzYWJsZWRDbGFzcyArICcpJykuYWRkQ2xhc3MoJ21zLXNlbGVjdGVkJykuaGlkZSgpO1xuICAgICAgICAgICAgdGhpcy4kc2VsZWN0aW9uVWwuZmluZCgnLm1zLW9wdGdyb3VwLWxhYmVsJykuc2hvdygpO1xuICAgICAgICAgICAgdGhpcy4kc2VsZWN0YWJsZVVsLmZpbmQoJy5tcy1vcHRncm91cC1sYWJlbCcpLmhpZGUoKTtcbiAgICAgICAgICAgIHRoaXMuJHNlbGVjdGlvblVsLmZpbmQoJy5tcy1lbGVtLXNlbGVjdGlvbicpLmZpbHRlcignOm5vdCguJyArIHRoaXMub3B0aW9ucy5kaXNhYmxlZENsYXNzICsgJyknKS5hZGRDbGFzcygnbXMtc2VsZWN0ZWQnKS5zaG93KCk7XG4gICAgICAgICAgICB0aGlzLiRzZWxlY3Rpb25VbC5mb2N1cygpO1xuICAgICAgICAgICAgbXMudHJpZ2dlcignY2hhbmdlJyk7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHRoaXMub3B0aW9ucy5hZnRlclNlbGVjdCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgIHZhciBzZWxlY3RlZFZhbHVlcyA9ICQuZ3JlcChtcy52YWwoKSwgZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICQuaW5BcnJheShpdGVtLCB2YWx1ZXMpIDwgMDtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aGlzLm9wdGlvbnMuYWZ0ZXJTZWxlY3QuY2FsbCh0aGlzLCBzZWxlY3RlZFZhbHVlcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgJ2Rlc2VsZWN0X2FsbCc6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBtcyA9IHRoaXMuJGVsZW1lbnQsXG4gICAgICAgICAgICAgICAgdmFsdWVzID0gbXMudmFsKCk7XG5cbiAgICAgICAgICAgIG1zLmZpbmQoJ29wdGlvbicpLnByb3AoJ3NlbGVjdGVkJywgZmFsc2UpO1xuICAgICAgICAgICAgdGhpcy4kc2VsZWN0YWJsZVVsLmZpbmQoJy5tcy1lbGVtLXNlbGVjdGFibGUnKS5yZW1vdmVDbGFzcygnbXMtc2VsZWN0ZWQnKS5zaG93KCk7XG4gICAgICAgICAgICB0aGlzLiRzZWxlY3Rpb25VbC5maW5kKCcubXMtb3B0Z3JvdXAtbGFiZWwnKS5oaWRlKCk7XG4gICAgICAgICAgICB0aGlzLiRzZWxlY3RhYmxlVWwuZmluZCgnLm1zLW9wdGdyb3VwLWxhYmVsJykuc2hvdygpO1xuICAgICAgICAgICAgdGhpcy4kc2VsZWN0aW9uVWwuZmluZCgnLm1zLWVsZW0tc2VsZWN0aW9uJykucmVtb3ZlQ2xhc3MoJ21zLXNlbGVjdGVkJykuaGlkZSgpO1xuICAgICAgICAgICAgdGhpcy4kc2VsZWN0YWJsZVVsLmZvY3VzKCk7XG4gICAgICAgICAgICBtcy50cmlnZ2VyKCdjaGFuZ2UnKTtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgdGhpcy5vcHRpb25zLmFmdGVyRGVzZWxlY3QgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm9wdGlvbnMuYWZ0ZXJEZXNlbGVjdC5jYWxsKHRoaXMsIHZhbHVlcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgc2FuaXRpemU6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgdmFyIGhhc2ggPSAwLCBpLCBjaGFyYWN0ZXI7XG4gICAgICAgICAgICBpZiAodmFsdWUubGVuZ3RoID09IDApIHJldHVybiBoYXNoO1xuICAgICAgICAgICAgdmFyIGxzID0gMDtcbiAgICAgICAgICAgIGZvciAoaSA9IDAsIGxzID0gdmFsdWUubGVuZ3RoOyBpIDwgbHM7IGkrKykge1xuICAgICAgICAgICAgICAgIGNoYXJhY3RlciA9IHZhbHVlLmNoYXJDb2RlQXQoaSk7XG4gICAgICAgICAgICAgICAgaGFzaCA9ICgoaGFzaCA8PCA1KSAtIGhhc2gpICsgY2hhcmFjdGVyO1xuICAgICAgICAgICAgICAgIGhhc2ggfD0gMDsgLy8gQ29udmVydCB0byAzMmJpdCBpbnRlZ2VyXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gaGFzaDtcbiAgICAgICAgfSxcbiAgICB9O1xuXG4gICAgLyogTVVMVElTRUxFQ1QgUExVR0lOIERFRklOSVRJT05cbiAgICAgKiA9PT09PT09PT09PT09PT09PT09PT09PSAqL1xuXG4gICAgJC5mbi5tdWx0aVNlbGVjdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIG9wdGlvbiA9IGFyZ3VtZW50c1swXSxcbiAgICAgICAgICAgIGFyZ3MgPSBhcmd1bWVudHM7XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgJHRoaXMgPSAkKHRoaXMpLFxuICAgICAgICAgICAgICAgIGRhdGEgPSAkdGhpcy5kYXRhKCdtdWx0aXNlbGVjdCcpLFxuICAgICAgICAgICAgICAgIG9wdGlvbnMgPSAkLmV4dGVuZCh7fSwgJC5mbi5tdWx0aVNlbGVjdC5kZWZhdWx0cywgJHRoaXMuZGF0YSgpLCB0eXBlb2Ygb3B0aW9uID09PSAnb2JqZWN0JyAmJiBvcHRpb24pO1xuXG4gICAgICAgICAgICBpZiAoIWRhdGEpIHtcbiAgICAgICAgICAgICAgICAkdGhpcy5kYXRhKCdtdWx0aXNlbGVjdCcsIChkYXRhID0gbmV3IE11bHRpU2VsZWN0KHRoaXMsIG9wdGlvbnMpKSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICh0eXBlb2Ygb3B0aW9uID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIGRhdGFbb3B0aW9uXShhcmdzWzFdKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgZGF0YS5pbml0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICAkLmZuLm11bHRpU2VsZWN0LmRlZmF1bHRzID0ge1xuICAgICAgICBrZXlTZWxlY3Q6IFszMl0sXG4gICAgICAgIHNlbGVjdGFibGVPcHRncm91cDogZmFsc2UsXG4gICAgICAgIGRpc2FibGVkQ2xhc3M6ICdkaXNhYmxlZCcsXG4gICAgICAgIGRibENsaWNrOiBmYWxzZSxcbiAgICAgICAga2VlcE9yZGVyOiBmYWxzZSxcbiAgICAgICAgY3NzQ2xhc3M6ICcnLFxuICAgIH07XG5cbiAgICAkLmZuLm11bHRpU2VsZWN0LkNvbnN0cnVjdG9yID0gTXVsdGlTZWxlY3Q7XG5cbiAgICAkLmZuLmluc2VydEF0ID0gZnVuY3Rpb24gKGluZGV4LCAkcGFyZW50KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKGluZGV4ID09PSAwKSB7XG4gICAgICAgICAgICAgICAgJHBhcmVudC5wcmVwZW5kKHRoaXMpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAkcGFyZW50LmNoaWxkcmVuKCkuZXEoaW5kZXggLSAxKS5hZnRlcih0aGlzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfTtcblxufSh3aW5kb3cualF1ZXJ5KTtcbiJdfQ=="}