jQuery(document).ready((function(){const e=function(e){return jQuery("input, select, textarea").filter('[name$="['+e+']"]')},s=function(e){let s=null;return e.each((function(e,n){n.checked&&(s=n.value)})),s},n=function(e,n,a){let t="paths"===s(o),l=e.filter(":checked").length>0;(!n&&t||l)&&(a=""),e[0].setCustomValidity(a)},a=e("schemes_https").add(e("schemes_http")),t=e("www_subdomains_with").add(e("www_subdomains_without")),l=e("trailing_slashes_with").add(e("trailing_slashes_without")),o=e("extent");let r=null;const c=function(){n(a,!1,"Select at least one scheme.")},i=function(){n(t,!1,"Select whether www. subdomains are used or not.")},u=function(){n(l,!0,"Select whether URLs end with a trailing slash or not.")},d=function(){let n="urls"===s(o);jQuery(".js-extent_url").toggle(n),e("domains").attr("required",n),c(),i()};o.change(d),a.change(c),t.change(i),l.change(u);jQuery(".js-oc-analyze-original-urls").click((function(s){s.preventDefault();let n=jQuery(".js-oc-analysis__waiting"),a=jQuery(".js-oc-analysis__instructions"),t=jQuery(".js-oc-analysis__error"),l=jQuery(".js-oc-analysis__instructions--adjust"),o=n.add(a).add(t).add(l),c=oc_ajax.oc_ajax_url||"",i={action:"analyze_original_urls",original_urls_property_name:e("original_urls_property_name").val(),domains:e("domains").val()};o.addClass("hidden"),n.removeClass("hidden"),jQuery.post(c,i,null,"json").done((function(e){r=e;let t,o='<span class="js-oc-url-result__icon js-oc-url-result__icon--good dashicons dashicons-yes-alt"></span>',c='<span class="js-oc-url-result__icon js-oc-url-result__icon--neutral dashicons dashicons-yes-alt"></span>',i='<span class="js-oc-url-result__icon js-oc-url-result__icon--low dashicons dashicons-warning"></span>',u='<span class="js-oc-url-result__icon js-oc-url-result__icon--incompatible dashicons dashicons-warning"></span>',d='<span class="js-oc-url-result__icon js-oc-url-result__icon--insufficient dashicons dashicons-star-half"></span>',h=new Set;for(const e of r){let s=jQuery("#oc-url-result__"+e.key),n=e.resultText;switch(e.resultStatus){case"good":t=o;break;case"low":t=i,h.add(t);break;case"neutral":t=c;break;case"incompatible":t=u,h.add(t);break;case"insufficient":t=d;break;default:t=""}s.html("").append('<span class="js-oc-url-result"> '+t+n+"</span>")}h.size>0&&(l.find(".js-icons").html(Array.from(h).join("")),l.removeClass("hidden")),n.addClass("hidden"),a.removeClass("hidden"),_(s)})).fail((function(e){jQuery("[id^=oc-url-result__]").html(""),jQuery(".js-oc-analysis__error__message").html(e.responseText),n.addClass("hidden"),t.removeClass("hidden")}))}));const _=function(s){s.preventDefault();for(const s of r){let n=s.id?document.getElementById(s.id):e(s.key)[0];"checkbox"===n.type||"radio"===n.type?n.checked=s.recommendedValue:n.value=s.recommendedValue,jQuery(n).change()}};d(),u()}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFkbWluLmpzIl0sIm5hbWVzIjpbImpRdWVyeSIsImRvY3VtZW50IiwicmVhZHkiLCJnZXRGaWVsZHMiLCJuYW1lIiwiZmlsdGVyIiwiZ2V0UmFkaW9WYWx1ZSIsImVsZW1lbnRzIiwicmVzdWx0IiwiZWFjaCIsImkiLCJlbCIsImNoZWNrZWQiLCJ2YWx1ZSIsImF0TGVhc3RPbmVDaGVja2VkIiwiJGNoZWNrYm94ZXMiLCJhcHBsaWNhYmxlVG9QYXRocyIsImVycm9yTWVzc2FnZSIsImV4dGVudElzUGF0aHMiLCIkZXh0ZW50cyIsImFueUlzQ2hlY2tlZCIsImxlbmd0aCIsInNldEN1c3RvbVZhbGlkaXR5IiwiJHNjaGVtZXNDaGVja2JveGVzIiwiYWRkIiwiJHN1YmRvbWFpbkNoZWNrYm94ZXMiLCIkc2xhc2hlc0NoZWNrYm94ZXMiLCJhbmFseXNpc1Jlc3VsdCIsImV2YWx1YXRlU2NoZW1lUmVxdWlyZW1lbnRzIiwiZXZhbHVhdGVTdWJkb21haW5SZXF1aXJlbWVudHMiLCJldmFsdWF0ZVNsYXNoZXNSZXF1aXJlbWVudHMiLCJvbkV4dGVudENoYW5nZSIsImV4dGVudElzVXJscyIsInRvZ2dsZSIsImF0dHIiLCJjaGFuZ2UiLCJjbGljayIsImV2ZW50IiwicHJldmVudERlZmF1bHQiLCIkd2FpdGluZ1dyYXBwZXIiLCIkaW5zdHJ1Y3Rpb25zV3JhcHBlciIsIiRlcnJvcldyYXBwZXIiLCIkYWRqdXN0V3JhcHBlciIsIiRhbGxXcmFwcGVycyIsInBvc3RVcmwiLCJvY19hamF4Iiwib2NfYWpheF91cmwiLCJwYXJhbXMiLCJhY3Rpb24iLCJvcmlnaW5hbF91cmxzX3Byb3BlcnR5X25hbWUiLCJ2YWwiLCJkb21haW5zIiwiYWRkQ2xhc3MiLCJyZW1vdmVDbGFzcyIsInBvc3QiLCJkb25lIiwiZGF0YSIsImljb24iLCJpY29ucyIsImFkanVzdG1lbnRJY29uc1VzZWQiLCJTZXQiLCJpdGVtIiwiJGNvbnRhaW5lciIsImtleSIsInRleHQiLCJyZXN1bHRUZXh0IiwicmVzdWx0U3RhdHVzIiwiaHRtbCIsImFwcGVuZCIsInNpemUiLCJmaW5kIiwiQXJyYXkiLCJmcm9tIiwiam9pbiIsImFwcGx5QW5hbHlzaXNSZWNvbW1lbmRhdGlvbnMiLCJmYWlsIiwicmVzcG9uc2VUZXh0IiwiZmllbGQiLCJnZXRFbGVtZW50QnlJZCIsImlkIiwidHlwZSIsInJlY29tbWVuZGVkVmFsdWUiXSwibWFwcGluZ3MiOiJBQUFBQSxPQUFPQyxVQUFVQyxPQUFNLFdBT25CLE1BQU1DLEVBQVksU0FBVUMsR0FDeEIsT0FBT0osT0FBTywyQkFBMkJLLE9BQU8sWUFBY0QsRUFBTyxRQVNuRUUsRUFBZ0IsU0FBVUMsR0FDNUIsSUFBSUMsRUFBUyxLQU1iLE9BTEFELEVBQVNFLE1BQUssU0FBVUMsRUFBR0MsR0FDbkJBLEVBQUdDLFVBQ0hKLEVBQVNHLEVBQUdFLFVBR2JMLEdBVUxNLEVBQW9CLFNBQVVDLEVBQWFDLEVBQW1CQyxHQUNoRSxJQUFJQyxFQUE2QyxVQUE1QlosRUFBY2EsR0FDL0JDLEVBQWdCTCxFQUFZVixPQUFPLFlBQVlnQixPQUFTLElBQ3RETCxHQUFxQkUsR0FBa0JFLEtBQ3pDSCxFQUFlLElBRW5CRixFQUFZLEdBQUdPLGtCQUFrQkwsSUFHL0JNLEVBQXFCcEIsRUFBVSxpQkFBaUJxQixJQUFJckIsRUFBVSxpQkFDOURzQixFQUF1QnRCLEVBQVUsdUJBQXVCcUIsSUFBSXJCLEVBQVUsMkJBQ3RFdUIsRUFBcUJ2QixFQUFVLHlCQUF5QnFCLElBQUlyQixFQUFVLDZCQUN0RWdCLEVBQVdoQixFQUFVLFVBQzNCLElBQUl3QixFQUFpQixLQUVyQixNQUFNQyxFQUE2QixXQUMvQmQsRUFBa0JTLEdBQW9CLEVBQU8sZ0NBRTNDTSxFQUFnQyxXQUNsQ2YsRUFBa0JXLEdBQXNCLEVBQU8sb0RBRTdDSyxFQUE4QixXQUNoQ2hCLEVBQWtCWSxHQUFvQixFQUFNLDBEQU0xQ0ssRUFBaUIsV0FDbkIsSUFBSUMsRUFBNEMsU0FBNUIxQixFQUFjYSxHQUNsQ25CLE9BQU8sa0JBQWtCaUMsT0FBT0QsR0FDaEM3QixFQUFVLFdBQVcrQixLQUFLLFdBQVlGLEdBQ3RDSixJQUNBQyxLQUVKVixFQUFTZ0IsT0FBT0osR0FDaEJSLEVBQW1CWSxPQUFPUCxHQUMxQkgsRUFBcUJVLE9BQU9OLEdBQzVCSCxFQUFtQlMsT0FBT0wsR0FxRjFCOUIsT0FBTyxnQ0FBZ0NvQyxPQS9FaEIsU0FBVUMsR0FDN0JBLEVBQU1DLGlCQUVOLElBQUlDLEVBQXVCdkMsT0FBTyw0QkFDOUJ3QyxFQUF1QnhDLE9BQU8saUNBQzlCeUMsRUFBdUJ6QyxPQUFPLDBCQUM5QjBDLEVBQXVCMUMsT0FBTyx5Q0FDOUIyQyxFQUFlSixFQUFnQmYsSUFBSWdCLEdBQXNCaEIsSUFBSWlCLEdBQWVqQixJQUFJa0IsR0FDaEZFLEVBQVVDLFFBQVFDLGFBQWUsR0FDakNDLEVBQVMsQ0FDTEMsT0FBNkIsd0JBQzdCQyw0QkFBNkI5QyxFQUFVLCtCQUErQitDLE1BQ3RFQyxRQUE2QmhELEVBQVUsV0FBVytDLE9BRzFEUCxFQUFhUyxTQUFTLFVBQ3RCYixFQUFnQmMsWUFBWSxVQUU1QnJELE9BQU9zRCxLQUFLVixFQUFTRyxFQUFRLEtBQU0sUUFDOUJRLE1BQUssU0FBVUMsR0FDWjdCLEVBQWlCNkIsRUFFakIsSUFBSUMsRUFDQUMsRUFDa0Isd0dBRGxCQSxFQUVrQiwyR0FGbEJBLEVBR2tCLHVHQUhsQkEsRUFJa0IsZ0hBSmxCQSxFQUtrQixrSEFFbEJDLEVBQXNCLElBQUlDLElBRTlCLElBQUssTUFBTUMsS0FBUWxDLEVBQWdCLENBQy9CLElBQUltQyxFQUFhOUQsT0FBTyxtQkFBcUI2RCxFQUFLRSxLQUM5Q0MsRUFBT0gsRUFBS0ksV0FFaEIsT0FBUUosRUFBS0ssY0FDVCxJQUFLLE9BQ0RULEVBQU9DLEVBQ1AsTUFDSixJQUFLLE1BQ0RELEVBQU9DLEVBQ1BDLEVBQW9CbkMsSUFBSWlDLEdBQ3hCLE1BQ0osSUFBSyxVQUNEQSxFQUFPQyxFQUNQLE1BQ0osSUFBSyxlQUNERCxFQUFPQyxFQUNQQyxFQUFvQm5DLElBQUlpQyxHQUN4QixNQUNKLElBQUssZUFDREEsRUFBT0MsRUFDUCxNQUNKLFFBQ0lELEVBQU8sR0FHZkssRUFBV0ssS0FBSyxJQUFJQyxPQUFPLG1DQUFxQ1gsRUFBT08sRUFBTyxXQUU5RUwsRUFBb0JVLEtBQU8sSUFDM0IzQixFQUFlNEIsS0FBSyxhQUFhSCxLQUFLSSxNQUFNQyxLQUFLYixHQUFxQmMsS0FBSyxLQUMzRS9CLEVBQWVXLFlBQVksV0FHL0JkLEVBQWdCYSxTQUFTLFVBQ3pCWixFQUFxQmEsWUFBWSxVQUNqQ3FCLEVBQTZCckMsTUFDOUJzQyxNQUFLLFNBQVVuQixHQUVkeEQsT0FBTyx5QkFBeUJtRSxLQUFLLElBRXBCbkUsT0FBTyxtQ0FDYm1FLEtBQUtYLEVBQUtvQixjQUVyQnJDLEVBQWdCYSxTQUFTLFVBQ3pCWCxFQUFjWSxZQUFZLGdCQVF0QyxNQUFNcUIsRUFBK0IsU0FBVXJDLEdBQzNDQSxFQUFNQyxpQkFFTixJQUFLLE1BQU11QixLQUFRbEMsRUFBZ0IsQ0FNL0IsSUFBSWtELEVBQVNoQixFQUFPLEdBQUk1RCxTQUFTNkUsZUFBZWpCLEVBQUtrQixJQUFNNUUsRUFBVTBELEVBQUtFLEtBQUssR0FFNUQsYUFBZmMsRUFBTUcsTUFBc0MsVUFBZkgsRUFBTUcsS0FDbkNILEVBQU1qRSxRQUFVaUQsRUFBS29CLGlCQUVyQkosRUFBTWhFLE1BQVFnRCxFQUFLb0IsaUJBSXZCakYsT0FBTzZFLEdBQU8xQyxXQUt0QkosSUFDQUQiLCJmaWxlIjoiYWRtaW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJqUXVlcnkoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uICgpIHtcbiAgICAvKipcbiAgICAgKiBGaW5kIGZvcm0gZmllbGRzIGJ5IG5hbWUsIHdpdGhvdXQgYmVpbmcgY29uZnVzZWQgYnkgcHJlZml4ZXMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZVxuICAgICAqIEByZXR1cm5zIHtqUXVlcnl9XG4gICAgICovXG4gICAgY29uc3QgZ2V0RmllbGRzID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgICAgcmV0dXJuIGpRdWVyeSgnaW5wdXQsIHNlbGVjdCwgdGV4dGFyZWEnKS5maWx0ZXIoJ1tuYW1lJD1cIlsnICsgbmFtZSArICddXCJdJyk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEZpbmQgdGhlIGNoZWNrZWQgdmFsdWUgaW4gYSBjb2xsZWN0aW9uIG9mIHJhZGlvIGlucHV0cy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7alF1ZXJ5fSBlbGVtZW50cyAtIENvbGxlY3Rpb24gb2YgcmFkaW8gaW5wdXRzLiBTaG91bGQgYWxsIGhhdmUgdGhlIHNhbWUgbmFtZS5cbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfG51bGx9XG4gICAgICovXG4gICAgY29uc3QgZ2V0UmFkaW9WYWx1ZSA9IGZ1bmN0aW9uIChlbGVtZW50cykge1xuICAgICAgICBsZXQgcmVzdWx0ID0gbnVsbDtcbiAgICAgICAgZWxlbWVudHMuZWFjaChmdW5jdGlvbiAoaSwgZWwpIHtcbiAgICAgICAgICAgIGlmIChlbC5jaGVja2VkKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gZWwudmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBSZXF1aXJlIGF0IGxlYXN0IG9uZSBjaGVja2JveCB0byBiZSBjaGVja2VkLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtqUXVlcnl9ICRjaGVja2JveGVzIC0gQ29sbGVjdGlvbiBvZiBjaGVja2JveGVzLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gYXBwbGljYWJsZVRvUGF0aHNcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZXJyb3JNZXNzYWdlIC0gTWVzc2FnZSB0byBkaXNwbGF5IGlmIHJlcXVpcmVtZW50IGlzIG5vdCBtZXQuXG4gICAgICovXG4gICAgY29uc3QgYXRMZWFzdE9uZUNoZWNrZWQgPSBmdW5jdGlvbiAoJGNoZWNrYm94ZXMsIGFwcGxpY2FibGVUb1BhdGhzLCBlcnJvck1lc3NhZ2UpIHtcbiAgICAgICAgbGV0IGV4dGVudElzUGF0aHMgPSAoZ2V0UmFkaW9WYWx1ZSgkZXh0ZW50cykgPT09ICdwYXRocycpO1xuICAgICAgICBsZXQgYW55SXNDaGVja2VkID0gKCRjaGVja2JveGVzLmZpbHRlcignOmNoZWNrZWQnKS5sZW5ndGggPiAwKTtcbiAgICAgICAgaWYgKCghYXBwbGljYWJsZVRvUGF0aHMgJiYgZXh0ZW50SXNQYXRocykgfHwgYW55SXNDaGVja2VkKSB7XG4gICAgICAgICAgICBlcnJvck1lc3NhZ2UgPSAnJztcbiAgICAgICAgfVxuICAgICAgICAkY2hlY2tib3hlc1swXS5zZXRDdXN0b21WYWxpZGl0eShlcnJvck1lc3NhZ2UpO1xuICAgIH1cblxuICAgIGNvbnN0ICRzY2hlbWVzQ2hlY2tib3hlcyA9IGdldEZpZWxkcygnc2NoZW1lc19odHRwcycpLmFkZChnZXRGaWVsZHMoJ3NjaGVtZXNfaHR0cCcpKTtcbiAgICBjb25zdCAkc3ViZG9tYWluQ2hlY2tib3hlcyA9IGdldEZpZWxkcygnd3d3X3N1YmRvbWFpbnNfd2l0aCcpLmFkZChnZXRGaWVsZHMoJ3d3d19zdWJkb21haW5zX3dpdGhvdXQnKSk7XG4gICAgY29uc3QgJHNsYXNoZXNDaGVja2JveGVzID0gZ2V0RmllbGRzKCd0cmFpbGluZ19zbGFzaGVzX3dpdGgnKS5hZGQoZ2V0RmllbGRzKCd0cmFpbGluZ19zbGFzaGVzX3dpdGhvdXQnKSk7XG4gICAgY29uc3QgJGV4dGVudHMgPSBnZXRGaWVsZHMoJ2V4dGVudCcpO1xuICAgIGxldCBhbmFseXNpc1Jlc3VsdCA9IG51bGw7XG5cbiAgICBjb25zdCBldmFsdWF0ZVNjaGVtZVJlcXVpcmVtZW50cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgYXRMZWFzdE9uZUNoZWNrZWQoJHNjaGVtZXNDaGVja2JveGVzLCBmYWxzZSwgJ1NlbGVjdCBhdCBsZWFzdCBvbmUgc2NoZW1lLicpO1xuICAgIH07XG4gICAgY29uc3QgZXZhbHVhdGVTdWJkb21haW5SZXF1aXJlbWVudHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGF0TGVhc3RPbmVDaGVja2VkKCRzdWJkb21haW5DaGVja2JveGVzLCBmYWxzZSwgJ1NlbGVjdCB3aGV0aGVyIHd3dy4gc3ViZG9tYWlucyBhcmUgdXNlZCBvciBub3QuJyk7XG4gICAgfTtcbiAgICBjb25zdCBldmFsdWF0ZVNsYXNoZXNSZXF1aXJlbWVudHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGF0TGVhc3RPbmVDaGVja2VkKCRzbGFzaGVzQ2hlY2tib3hlcywgdHJ1ZSwgJ1NlbGVjdCB3aGV0aGVyIFVSTHMgZW5kIHdpdGggYSB0cmFpbGluZyBzbGFzaCBvciBub3QuJyk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEhpZGUvc2hvdy9yZXF1aXJlIGZpZWxkcyBkZXBlbmRpbmcgb24gY2hvc2VuIGV4dGVudC5cbiAgICAgKi9cbiAgICBjb25zdCBvbkV4dGVudENoYW5nZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgbGV0IGV4dGVudElzVXJscyA9IChnZXRSYWRpb1ZhbHVlKCRleHRlbnRzKSA9PT0gJ3VybHMnKTtcbiAgICAgICAgalF1ZXJ5KCcuanMtZXh0ZW50X3VybCcpLnRvZ2dsZShleHRlbnRJc1VybHMpO1xuICAgICAgICBnZXRGaWVsZHMoJ2RvbWFpbnMnKS5hdHRyKCdyZXF1aXJlZCcsIGV4dGVudElzVXJscyk7XG4gICAgICAgIGV2YWx1YXRlU2NoZW1lUmVxdWlyZW1lbnRzKCk7XG4gICAgICAgIGV2YWx1YXRlU3ViZG9tYWluUmVxdWlyZW1lbnRzKCk7XG4gICAgfTtcbiAgICAkZXh0ZW50cy5jaGFuZ2Uob25FeHRlbnRDaGFuZ2UpO1xuICAgICRzY2hlbWVzQ2hlY2tib3hlcy5jaGFuZ2UoZXZhbHVhdGVTY2hlbWVSZXF1aXJlbWVudHMpO1xuICAgICRzdWJkb21haW5DaGVja2JveGVzLmNoYW5nZShldmFsdWF0ZVN1YmRvbWFpblJlcXVpcmVtZW50cyk7XG4gICAgJHNsYXNoZXNDaGVja2JveGVzLmNoYW5nZShldmFsdWF0ZVNsYXNoZXNSZXF1aXJlbWVudHMpO1xuXG4gICAgLyoqXG4gICAgICogR2V0IGFuYWx5c2lzIHZpYSBBamF4IGFuZCBkaXNwbGF5IHN0YXRzIG5leHQgdG8gZWFjaCBzZXR0aW5nLlxuICAgICAqL1xuICAgIC8qZ2xvYmFsIG9jX2FqYXgqL1xuICAgIGNvbnN0IG9uQW5hbHl6ZUNsaWNrID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgbGV0ICR3YWl0aW5nV3JhcHBlciAgICAgID0galF1ZXJ5KCcuanMtb2MtYW5hbHlzaXNfX3dhaXRpbmcnKSxcbiAgICAgICAgICAgICRpbnN0cnVjdGlvbnNXcmFwcGVyID0galF1ZXJ5KCcuanMtb2MtYW5hbHlzaXNfX2luc3RydWN0aW9ucycpLFxuICAgICAgICAgICAgJGVycm9yV3JhcHBlciAgICAgICAgPSBqUXVlcnkoJy5qcy1vYy1hbmFseXNpc19fZXJyb3InKSxcbiAgICAgICAgICAgICRhZGp1c3RXcmFwcGVyICAgICAgID0galF1ZXJ5KCcuanMtb2MtYW5hbHlzaXNfX2luc3RydWN0aW9ucy0tYWRqdXN0JyksXG4gICAgICAgICAgICAkYWxsV3JhcHBlcnMgPSAkd2FpdGluZ1dyYXBwZXIuYWRkKCRpbnN0cnVjdGlvbnNXcmFwcGVyKS5hZGQoJGVycm9yV3JhcHBlcikuYWRkKCRhZGp1c3RXcmFwcGVyKSxcbiAgICAgICAgICAgIHBvc3RVcmwgPSBvY19hamF4Lm9jX2FqYXhfdXJsIHx8ICcnLFxuICAgICAgICAgICAgcGFyYW1zID0ge1xuICAgICAgICAgICAgICAgIGFjdGlvbjogICAgICAgICAgICAgICAgICAgICAgJ2FuYWx5emVfb3JpZ2luYWxfdXJscycsXG4gICAgICAgICAgICAgICAgb3JpZ2luYWxfdXJsc19wcm9wZXJ0eV9uYW1lOiBnZXRGaWVsZHMoJ29yaWdpbmFsX3VybHNfcHJvcGVydHlfbmFtZScpLnZhbCgpLFxuICAgICAgICAgICAgICAgIGRvbWFpbnM6ICAgICAgICAgICAgICAgICAgICAgZ2V0RmllbGRzKCdkb21haW5zJykudmFsKCksXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICRhbGxXcmFwcGVycy5hZGRDbGFzcygnaGlkZGVuJyk7XG4gICAgICAgICR3YWl0aW5nV3JhcHBlci5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XG5cbiAgICAgICAgalF1ZXJ5LnBvc3QocG9zdFVybCwgcGFyYW1zLCBudWxsLCAnanNvbicpXG4gICAgICAgICAgICAuZG9uZShmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgIGFuYWx5c2lzUmVzdWx0ID0gZGF0YTtcblxuICAgICAgICAgICAgICAgIGxldCBpY29uLFxuICAgICAgICAgICAgICAgICAgICBpY29ucyA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGdvb2Q6ICAgICAgICAgJzxzcGFuIGNsYXNzPVwianMtb2MtdXJsLXJlc3VsdF9faWNvbiBqcy1vYy11cmwtcmVzdWx0X19pY29uLS1nb29kIGRhc2hpY29ucyBkYXNoaWNvbnMteWVzLWFsdFwiPjwvc3Bhbj4nLFxuICAgICAgICAgICAgICAgICAgICAgICAgbmV1dHJhbDogICAgICAnPHNwYW4gY2xhc3M9XCJqcy1vYy11cmwtcmVzdWx0X19pY29uIGpzLW9jLXVybC1yZXN1bHRfX2ljb24tLW5ldXRyYWwgZGFzaGljb25zIGRhc2hpY29ucy15ZXMtYWx0XCI+PC9zcGFuPicsXG4gICAgICAgICAgICAgICAgICAgICAgICBsb3c6ICAgICAgICAgICc8c3BhbiBjbGFzcz1cImpzLW9jLXVybC1yZXN1bHRfX2ljb24ganMtb2MtdXJsLXJlc3VsdF9faWNvbi0tbG93IGRhc2hpY29ucyBkYXNoaWNvbnMtd2FybmluZ1wiPjwvc3Bhbj4nLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5jb21wYXRpYmxlOiAnPHNwYW4gY2xhc3M9XCJqcy1vYy11cmwtcmVzdWx0X19pY29uIGpzLW9jLXVybC1yZXN1bHRfX2ljb24tLWluY29tcGF0aWJsZSBkYXNoaWNvbnMgZGFzaGljb25zLXdhcm5pbmdcIj48L3NwYW4+JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGluc3VmZmljaWVudDogJzxzcGFuIGNsYXNzPVwianMtb2MtdXJsLXJlc3VsdF9faWNvbiBqcy1vYy11cmwtcmVzdWx0X19pY29uLS1pbnN1ZmZpY2llbnQgZGFzaGljb25zIGRhc2hpY29ucy1zdGFyLWhhbGZcIj48L3NwYW4+JyxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgYWRqdXN0bWVudEljb25zVXNlZCA9IG5ldyBTZXQoKTtcblxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBhbmFseXNpc1Jlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICBsZXQgJGNvbnRhaW5lciA9IGpRdWVyeSgnI29jLXVybC1yZXN1bHRfXycgKyBpdGVtLmtleSksXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0ID0gaXRlbS5yZXN1bHRUZXh0O1xuXG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoaXRlbS5yZXN1bHRTdGF0dXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2dvb2QnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb24gPSBpY29ucy5nb29kO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnbG93JzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpY29uID0gaWNvbnMubG93O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkanVzdG1lbnRJY29uc1VzZWQuYWRkKGljb24pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnbmV1dHJhbCc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvbiA9IGljb25zLm5ldXRyYWw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdpbmNvbXBhdGlibGUnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb24gPSBpY29ucy5pbmNvbXBhdGlibGU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRqdXN0bWVudEljb25zVXNlZC5hZGQoaWNvbik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdpbnN1ZmZpY2llbnQnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb24gPSBpY29ucy5pbnN1ZmZpY2llbnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb24gPSAnJztcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICRjb250YWluZXIuaHRtbCgnJykuYXBwZW5kKCc8c3BhbiBjbGFzcz1cImpzLW9jLXVybC1yZXN1bHRcIj4gJyArIGljb24gKyB0ZXh0ICsgJzwvc3Bhbj4nKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGFkanVzdG1lbnRJY29uc1VzZWQuc2l6ZSA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgJGFkanVzdFdyYXBwZXIuZmluZCgnLmpzLWljb25zJykuaHRtbChBcnJheS5mcm9tKGFkanVzdG1lbnRJY29uc1VzZWQpLmpvaW4oJycpKTtcbiAgICAgICAgICAgICAgICAgICAgJGFkanVzdFdyYXBwZXIucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICR3YWl0aW5nV3JhcHBlci5hZGRDbGFzcygnaGlkZGVuJyk7XG4gICAgICAgICAgICAgICAgJGluc3RydWN0aW9uc1dyYXBwZXIucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpO1xuICAgICAgICAgICAgICAgIGFwcGx5QW5hbHlzaXNSZWNvbW1lbmRhdGlvbnMoZXZlbnQpO1xuICAgICAgICAgICAgfSkuZmFpbChmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgIC8vIEVtcHR5IHJlc3VsdHMgZnJvbSBhbnkgcHJldmlvdXMgYW5hbHlzaXMuXG4gICAgICAgICAgICAgICAgalF1ZXJ5KCdbaWRePW9jLXVybC1yZXN1bHRfX10nKS5odG1sKCcnKTtcblxuICAgICAgICAgICAgICAgIGxldCAkY29udGFpbmVyID0galF1ZXJ5KCcuanMtb2MtYW5hbHlzaXNfX2Vycm9yX19tZXNzYWdlJyk7XG4gICAgICAgICAgICAgICAgJGNvbnRhaW5lci5odG1sKGRhdGEucmVzcG9uc2VUZXh0KTtcblxuICAgICAgICAgICAgICAgICR3YWl0aW5nV3JhcHBlci5hZGRDbGFzcygnaGlkZGVuJyk7XG4gICAgICAgICAgICAgICAgJGVycm9yV3JhcHBlci5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XG4gICAgICAgICAgICB9KTtcbiAgICB9O1xuICAgIGpRdWVyeSgnLmpzLW9jLWFuYWx5emUtb3JpZ2luYWwtdXJscycpLmNsaWNrKG9uQW5hbHl6ZUNsaWNrKTtcblxuICAgIC8qKlxuICAgICAqIEFwcGx5IHRoZSByZWNvbW1lbmRhdGlvbnMgdG8gdGhlIGZvcm0uXG4gICAgICovXG4gICAgY29uc3QgYXBwbHlBbmFseXNpc1JlY29tbWVuZGF0aW9ucyA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBhbmFseXNpc1Jlc3VsdCkge1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIEFuIGl0ZW0uaWQgcHJvcGVydHkgd2lsbCBiZSBhdmFpbGFibGUgaW4gdGhlIGNhc2VzIHdoZW4gYSBrZXkgaXMgbm90IGVub3VnaCB0byBpZGVudGlmeSB0aGUgaW5wdXQgZWxlbWVudC5cbiAgICAgICAgICAgICAqIChJLmUuIHdoZW4gaXQncyBhIFJBRElPLilcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgbGV0IGZpZWxkID0gKGl0ZW0uaWQpID8gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaXRlbS5pZCkgOiBnZXRGaWVsZHMoaXRlbS5rZXkpWzBdO1xuXG4gICAgICAgICAgICBpZiAoZmllbGQudHlwZSA9PT0gJ2NoZWNrYm94JyB8fCBmaWVsZC50eXBlID09PSAncmFkaW8nKSB7XG4gICAgICAgICAgICAgICAgZmllbGQuY2hlY2tlZCA9IGl0ZW0ucmVjb21tZW5kZWRWYWx1ZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgZmllbGQudmFsdWUgPSBpdGVtLnJlY29tbWVuZGVkVmFsdWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIFRyaWdnZXIgYW55IGV2ZW50cy5cbiAgICAgICAgICAgIGpRdWVyeShmaWVsZCkuY2hhbmdlKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBJbml0aWFsaXplLlxuICAgIG9uRXh0ZW50Q2hhbmdlKCk7XG4gICAgZXZhbHVhdGVTbGFzaGVzUmVxdWlyZW1lbnRzKCk7XG59KTtcbiJdfQ==
